;/*FB_PKG_DELIM*/

__d("CometComposerAsAFeaturePushPageBridge.react",["BaseMultiStepContainer.react","CometComposerPushPageContext","CometComposerViewStateContext","CometComposerViewStateDispatcherContext","CometComposerViewStateReducersContext","RelayHooks","TCometComposerTarget","createEmptyCometComposerViewStateWithTarget","decorateMultiStepContainerPushPage","react","react-compiler-runtime","reduceComposerViewState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useReducer;function m(e){var t=o("react-compiler-runtime").c(27),n=e.children,a=e.creationSessionID,i=e.dispatcher,l=e.reducers,u=e.viewStatePart,c=o("RelayHooks").useActorID(),m,p,_,f;if(t[0]!==a||t[1]!==l||t[2]!==c||t[3]!==u){var g={id:c,type:o("TCometComposerTarget").ComposerTargetType.Feed};m=d,t[8]!==l||t[9]!==u?(p=function(t,n){var e=r("reduceComposerViewState")(l,{current:new Map},t,u,n);return e},t[8]=l,t[9]=u,t[10]=p):p=t[10],t[11]!==a||t[12]!==u?(_=babelHelpers.extends({},u,{creationSessionID:a}),t[11]=a,t[12]=u,t[13]=_):_=t[13],f=r("createEmptyCometComposerViewStateWithTarget")(g),t[0]=a,t[1]=l,t[2]=c,t[3]=u,t[4]=m,t[5]=p,t[6]=_,t[7]=f}else m=t[4],p=t[5],_=t[6],f=t[7];var h=m(p,_,f),y=h[0],C=h[1],b;t[14]!==i?(b=function(t){i(t),C(t)},t[14]=i,t[15]=b):b=t[15];var v=b,S;t[16]!==n?(S=s.jsx(r("BaseMultiStepContainer.react"),{children:function(t){return s.jsx(r("CometComposerPushPageContext").Provider,{value:r("decorateMultiStepContainerPushPage")(t,null,!1),children:n})}}),t[16]=n,t[17]=S):S=t[17];var R;t[18]!==y||t[19]!==S?(R=s.jsx(r("CometComposerViewStateContext").Provider,{value:y,children:S}),t[18]=y,t[19]=S,t[20]=R):R=t[20];var L;t[21]!==v||t[22]!==R?(L=s.jsx(r("CometComposerViewStateDispatcherContext").Provider,{value:v,children:R}),t[21]=v,t[22]=R,t[23]=L):L=t[23];var E;return t[24]!==l||t[25]!==L?(E=s.jsx(r("CometComposerViewStateReducersContext").Provider,{value:l,children:L}),t[24]=l,t[25]=L,t[26]=E):E=t[26],E}l.default=m}),98);
__d("CometComposerAsAFeaturePushPageBridgeContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({isBridgeBuilt:!1,isBridgeRequired:!1});l.default=u}),98);
__d("CometComposerLinksPluginForLexicalDeferred.react",["createComposerDeferredPlugin","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("createComposerDeferredPlugin")(r("requireDeferred")("CometComposerLinksPluginForLexicalWithDefaultExport.react").__setRef("CometComposerLinksPluginForLexicalDeferred.react"));l.default=u}),98);
__d("CometDialogComposerHeader.react",["FDSDialogHeader.react","react","react-compiler-runtime","useComposerHeaderOnClose","withComposerViewStatePart"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e.closeButtonTestID,a=e.creationSessionID,i=e.isDirty,l=e.isEmpty,u=e.onBack,c=e.onClose,d=e.title,m=e.triggerUnsavedChangesWarning,p=e.withBackButton,_=e.withCloseButton,f=n===void 0?"CometComposerHeader-CloseButton":n,g=i===void 0?!1:i,h=m===void 0?!1:m,y=p===void 0?!1:p,C=_===void 0?!1:_,b;t[0]!==a||t[1]!==g||t[2]!==l||t[3]!==c||t[4]!==h?(b={creationSessionID:a,isDirty:g,isEmpty:l,onClose:c,triggerUnsavedChangesWarning:h},t[0]=a,t[1]=g,t[2]=l,t[3]=c,t[4]=h,t[5]=b):b=t[5];var v=r("useComposerHeaderOnClose")(b),S=d!=null?d:void 0,R;return t[6]!==f||t[7]!==u||t[8]!==v||t[9]!==S||t[10]!==y||t[11]!==C?(R=s.jsx(r("FDSDialogHeader.react"),{closeTestID:f,onBack:u,onClose:v,text:S,withBackButton:y,withCloseButton:C,withoutDivider:!1}),t[6]=f,t[7]=u,t[8]=v,t[9]=S,t[10]=y,t[11]=C,t[12]=R):R=t[12],R}var c=r("withComposerViewStatePart")(u,function(e){var t;return{creationSessionID:e.creationSessionID,isDirty:e.isDirty,isEmpty:(t=e.isEmptyMetaData)==null?void 0:t.isEmpty}});l.default=c}),98);
__d("CometDialogComposerPage.react",["CometComposerAsAFeaturePushPageBridge.react","CometComposerAsAFeaturePushPageBridgeContext","CometComposerPushPageContext","CometComposerPushPageGlimmer.react","CometComposerPushPageRenderer.react","CometDialogComposerHeader.react","CometHideLayerOnEscape.react","CometPlaceholder.react","FDSDialogPage.react","emptyFunction","react","react-compiler-runtime","usePopPage"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t,n=o("react-compiler-runtime").c(37),a=e.children,l=e.creationSessionID,u=e.dispatcher,c=e.featureDefinitions,d=e.featureName,m=e.footer,p=e.options,_=e.pushPageFeatureBridge,f=e.pushPageHandler,g=e.reducers,h=e.title,y=e.viewStatePart,C=(t=r("usePopPage")())!=null?t:r("emptyFunction"),b;n[0]!==f?(b={pushPageHandler:f,useEntryPointBasedPushPages:!0},n[0]=f,n[1]=b):b=n[1];var v=b,S=m!=null?m:null,R;if(n[2]!==(p==null?void 0:p.hasCustomHeader)||n[3]!==(p==null?void 0:p.headerTestid)||n[4]!==(p==null?void 0:p.onBack)||n[5]!==(p==null?void 0:p.onClose)||n[6]!==(p==null?void 0:p.withBackButton)||n[7]!==(p==null?void 0:p.withCloseButton)||n[8]!==C||n[9]!==h){var L,E;R=(p==null?void 0:p.hasCustomHeader)===!0?null:s.jsx(r("CometDialogComposerHeader.react"),{onBack:function(){C();var e=p==null?void 0:p.onBack;e&&e()},onClose:p==null?void 0:p.onClose,testid:void 0,title:h,withBackButton:(L=p==null?void 0:p.withBackButton)!=null?L:!0,withCloseButton:(E=p==null?void 0:p.withCloseButton)!=null?E:!1}),n[2]=p==null?void 0:p.hasCustomHeader,n[3]=p==null?void 0:p.headerTestid,n[4]=p==null?void 0:p.onBack,n[5]=p==null?void 0:p.onClose,n[6]=p==null?void 0:p.withBackButton,n[7]=p==null?void 0:p.withCloseButton,n[8]=C,n[9]=h,n[10]=R}else R=n[10];var k;n[11]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(r("CometComposerPushPageGlimmer.react"),{withPopover:!1}),n[11]=k):k=n[11];var I;n[12]!==a||n[13]!==c||n[14]!==d?(I=s.jsx(r("CometPlaceholder.react"),{fallback:k,name:i.id,children:s.jsx(r("CometComposerPushPageRenderer.react"),{featureDefinitions:c,featureName:d,isOverflowHandled:!0,children:a})},1),n[12]=a,n[13]=c,n[14]=d,n[15]=I):I=n[15];var T;n[16]!==v||n[17]!==I?(T=s.jsx(r("CometComposerPushPageContext").Provider,{value:v,children:I}),n[16]=v,n[17]=I,n[18]=T):T=n[18];var D;n[19]!==C||n[20]!==T?(D=s.jsx(r("CometHideLayerOnEscape.react"),{onHide:C,children:T}),n[19]=C,n[20]=T,n[21]=D):D=n[21];var x;n[22]!==S||n[23]!==R||n[24]!==D?(x=s.jsx(r("FDSDialogPage.react"),{footer:S,header:R,children:D}),n[22]=S,n[23]=R,n[24]=D,n[25]=x):x=n[25];var $=x,P;n[26]!==_.isBridgeRequired?(P={isBridgeBuilt:!0,isBridgeRequired:_.isBridgeRequired},n[26]=_.isBridgeRequired,n[27]=P):P=n[27];var N=P;if(!_.isBridgeRequired||_.isBridgeBuilt)return $;var M;n[28]!==l||n[29]!==u||n[30]!==$||n[31]!==g||n[32]!==y?(M=s.jsx(r("CometComposerAsAFeaturePushPageBridge.react"),{creationSessionID:l,dispatcher:u,reducers:g,viewStatePart:y,children:$}),n[28]=l,n[29]=u,n[30]=$,n[31]=g,n[32]=y,n[33]=M):M=n[33];var w;return n[34]!==N||n[35]!==M?(w=s.jsx(r("CometComposerAsAFeaturePushPageBridgeContext").Provider,{value:N,children:M}),n[34]=N,n[35]=M,n[36]=w):w=n[36],w}l.default=c}),98);
__d("CometGroupResharesContext",["emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=u.useState,_={feedLocation:null,isInvitedEmpty:!1,isNotYetInvitedEmpty:!1,setIsInvitedEmpty:r("emptyFunction"),setIsNotYetInvitedEmpty:r("emptyFunction")},f=c(_);function g(e){var t=o("react-compiler-runtime").c(7),n=e.children,r=e.feedLocation,a=p(!1),i=a[0],l=a[1],u=p(!1),c=u[0],d=u[1],m;t[0]!==r||t[1]!==i||t[2]!==c?(m={feedLocation:r,isInvitedEmpty:i,isNotYetInvitedEmpty:c,setIsInvitedEmpty:l,setIsNotYetInvitedEmpty:d},t[0]=r,t[1]=i,t[2]=c,t[3]=m):m=t[3];var _=m,g;return t[4]!==n||t[5]!==_?(g=s.jsx(f.Provider,{value:_,children:n}),t[4]=n,t[5]=_,t[6]=g):g=t[6],g}function h(){return d(f)}function y(){var e=h();return e.feedLocation==="WORKPLACE_KNOWLEDGE"}l.Provider=g,l.useGroupResharesContext=h,l.useShouldShowKLShareModal=y}),98);
__d("CometMessengerReshareContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={LSResults:[],addSelectedTarget:function(t){},addSelectedThreadData:function(t){},getXMAFileArgsPromise:function(){return null},getXMAPreviewPromise:function(){return null},removeSelectedTargetID:function(t){},selectedContacts:new Map,selectedTargets:new Map,setXMADataPromise:function(t){}},c=s.createContext(u),d=c;l.default=d}),98);
__d("UnifiedShareSheetSendMessageButtonPlaceholder.react",["FDSGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={glimmer:{borderStartStartRadius:"x16qb05n",borderStartEndRadius:"xi7iut8",borderEndEndRadius:"x1dm3dyd",borderEndStartRadius:"x1pv694p",height:"xc9qbxq",width:"xh8yej3",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"xexx8yu",children:s.jsx(r("FDSGlimmer.react"),{index:0,xstyle:u.glimmer})}),e[0]=t):t=e[0],t}l.default=c}),98);
__d("UnifiedShareSheetSendMessageComposerPlaceholder.react",["FDSGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={glimmer:{borderStartStartRadius:"x1xn7y0n",borderStartEndRadius:"x1uxb8k9",borderEndEndRadius:"x1vmbcc8",borderEndStartRadius:"x16xm01d",height:"xc9qbxq",width:"xh8yej3",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:"xv54qhq x1l90r2v xf7dkkf xexx8yu",children:s.jsx(r("FDSGlimmer.react"),{index:0,xstyle:u.glimmer})}),e[0]=t):t=e[0],t}l.default=c}),98);
__d("CometMessengerReshareFooterPlaceholder.react",["CometColumn.react","CometColumnItem.react","UnifiedShareSheetSendMessageButtonPlaceholder.react","UnifiedShareSheetSendMessageComposerPlaceholder.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.footerXStyle,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(r("CometColumnItem.react"),{paddingHorizontal:0,children:s.jsx(r("UnifiedShareSheetSendMessageComposerPlaceholder.react"),{})}),t[0]=a):a=t[0];var i;t[1]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(r("CometColumnItem.react"),{paddingHorizontal:16,children:s.jsx(r("UnifiedShareSheetSendMessageButtonPlaceholder.react"),{})}),t[1]=i):i=t[1];var l;return t[2]!==n?(l=s.jsxs(r("CometColumn.react"),{paddingVertical:12,spacing:0,xstyle:n,children:[a,i]}),t[2]=n,t[3]=l):l=t[3],l}l.default=u}),98);
__d("CometMessengerResharesDialogWrapper.react",["FDSDialog.react","FDSDialogPage.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={dialogPage:{maxHeight:"x1fd7afb",minHeight:"xajhti9",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(6),n=e.children,a=e.footer,i=e.header,l=e.isPushPageView,c=e.onClose,d;return t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==c?(d=l?s.jsx(r("FDSDialogPage.react"),{disablePageScroll:!0,footer:a,header:i,mobileFullHeight:!1,pageXStyle:u.dialogPage,children:n}):s.jsx(r("FDSDialog.react"),{disablePageScroll:!0,footer:a,header:i,mobileFullHeight:!1,onClose:c,pageXStyle:u.dialogPage,children:n}),t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=c,t[5]=d):d=t[5],d}l.default=c}),98);
__d("CometResharesSearchTargetsAreaPlaceholder.react",["CometColumn.react","CometColumnItem.react","CometRow.react","CometRowItem.react","FDSGlimmer.react","FDSUnitHeader.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={profilePictureGlimmer:{borderStartStartRadius:"x12ol6y4",borderStartEndRadius:"x180vkcf",borderEndEndRadius:"x1khw62d",borderEndStartRadius:"x709u02",height:"x1vqgdyp",width:"x100vrsf",$$css:!0},searchBarGlimmer:{borderStartStartRadius:"x1xn7y0n",borderStartEndRadius:"x1uxb8k9",borderEndEndRadius:"x1vmbcc8",borderEndStartRadius:"x16xm01d",height:"xc9qbxq",width:"xh8yej3",$$css:!0},userNameGlimmer:{borderStartStartRadius:"x16qb05n",borderStartEndRadius:"xi7iut8",borderEndEndRadius:"x1dm3dyd",borderEndStartRadius:"x1pv694p",height:"x1qx5ct2",width:"xh8yej3",$$css:!0}},c=function(){return s.jsx(r("CometColumnItem.react"),{children:s.jsxs(r("CometRow.react"),{paddingHorizontal:0,paddingTop:8,spacing:12,verticalAlign:"center",children:[s.jsx(r("CometRowItem.react"),{children:s.jsx(r("FDSGlimmer.react"),{index:1,xstyle:u.profilePictureGlimmer})}),s.jsx(r("CometRowItem.react"),{expanding:!0,children:s.jsx(r("FDSGlimmer.react"),{index:1,xstyle:u.userNameGlimmer})})]})})};function d(e){var t=o("react-compiler-runtime").c(16),n=e.headline,a=e.numberOfListCells,i=e.paddingHorizontal,l=e.paddingTop,d=e.paddingVertical,m=e.shouldShowSearchBar,p=a===void 0?3:a,_=i===void 0?16:i,f=d===void 0?12:d,g=m===void 0?!1:m,h;if(t[0]!==p){h=[];for(var y=0;y<p;y++)h.push(s.jsx(c,{},y));t[0]=p,t[1]=h}else h=t[1];var C;t[2]!==g?(C=g&&s.jsx(r("CometColumnItem.react"),{paddingTop:0,paddingVertical:8,children:s.jsx(r("FDSGlimmer.react"),{index:1,xstyle:u.searchBarGlimmer})}),t[2]=g,t[3]=C):C=t[3];var b;t[4]!==n||t[5]!==g?(b=n!=null&&s.jsx(r("CometColumnItem.react"),{paddingTop:g?void 0:0,paddingVertical:12,children:s.jsx(r("FDSUnitHeader.react"),{headline:n,level:3,paddingHorizontal:0,paddingTop:8})}),t[4]=n,t[5]=g,t[6]=b):b=t[6];var v;t[7]!==h?(v=s.jsx(r("CometColumnItem.react"),{children:s.jsx(r("CometColumn.react"),{paddingHorizontal:8,paddingTop:4,spacing:8,children:h})}),t[7]=h,t[8]=v):v=t[8];var S;return t[9]!==_||t[10]!==l||t[11]!==f||t[12]!==C||t[13]!==b||t[14]!==v?(S=s.jsxs(r("CometColumn.react"),{paddingHorizontal:_,paddingTop:l,paddingVertical:f,children:[C,b,v]}),t[9]=_,t[10]=l,t[11]=f,t[12]=C,t[13]=b,t[14]=v,t[15]=S):S=t[15],S}l.default=d}),98);
__d("CometMessengerResharesDialogPlaceholder.react",["fbt","CometMessengerReshareFooterPlaceholder.react","CometMessengerResharesDialogWrapper.react","CometResharesSearchTargetsAreaPlaceholder.react","FDSDialogHeader.react","react","react-compiler-runtime","usePopPage"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={footer:{backgroundColor:"x1jx94hy",borderTopColor:"x1pdss0j",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(15),n=e.isPushPageView,a=e.numberOfTargetRows,i=e.onClose,l=a===void 0?10:a,d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Send to"),t[0]=d):d=t[0];var m=d,p=r("usePopPage")(),_;t[1]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsx(r("CometMessengerReshareFooterPlaceholder.react"),{footerXStyle:c.footer}),t[1]=_):_=t[1];var f;t[2]!==p?(f=function(){p&&p()},t[2]=p,t[3]=f):f=t[3];var g;t[4]!==n||t[5]!==i||t[6]!==f?(g=u.jsx(r("FDSDialogHeader.react"),{onBack:f,onClose:i,text:m,withBackButton:n,withCloseButton:!0}),t[4]=n,t[5]=i,t[6]=f,t[7]=g):g=t[7];var h;t[8]!==l?(h=u.jsx(r("CometResharesSearchTargetsAreaPlaceholder.react"),{numberOfListCells:l,paddingHorizontal:16,paddingTop:12,paddingVertical:12,shouldShowSearchBar:!0}),t[8]=l,t[9]=h):h=t[9];var y;return t[10]!==n||t[11]!==i||t[12]!==g||t[13]!==h?(y=u.jsx(r("CometMessengerResharesDialogWrapper.react"),{footer:_,header:g,isPushPageView:n,onClose:i,children:h}),t[10]=n,t[11]=i,t[12]=g,t[13]=h,t[14]=y):y=t[14],y}l.default=d}),226);
__d("CometMessengerResharesUpdatedDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25054258700862948"}),null);
__d("CometMessengerResharesUpdatedDialogQuery$Parameters",["CometMessengerResharesUpdatedDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("CometMessengerResharesUpdatedDialogQuery_facebookRelayOperation"),metadata:{},name:"CometMessengerResharesUpdatedDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("CometMessengerResharesUpdatedDialog.entrypoint",["CometMessengerResharesUpdatedDialogQuery$Parameters","JSResourceForInteraction","WebPixelRatio","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){var e=r("gkx")("927"),t=r("gkx")("24317");return{queries:{queryReference:{parameters:r("CometMessengerResharesUpdatedDialogQuery$Parameters"),variables:{isLinkSharingEnabled:e,scale:o("WebPixelRatio").get(),shouldDisableMessengerListRanking:t}}}}},root:r("JSResourceForInteraction")("CometMessengerResharesUpdatedDialog.react").__setRef("CometMessengerResharesUpdatedDialog.entrypoint")};l.default=e}),98);
__d("DisappearingMessagesMode",[],(function(t,n,r,o,a,i){var e=Object.freeze({OFF:0,ON:1,OPEN_ON_DEPRECATED_DO_NOT_USE:2});i.default=e}),66);
__d("LSInstagramE2EEEligibility",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:-1,INELIGIBLE:0,ELIGIBLE:1,REQUIRED:2,DUAL_SEND_ELIGIBLE:3,GROUPS_ELIGIBLE:4});i.default=e}),66);
__d("LSIssueSearchQuery",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(67).fetch([[[e[0],e[4]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return r[1]=t.i64.of_float(Date.now()),t.db.table(67).add({query:e[0],surfaceType:e[4],statusPrimary:t.i64.cast([0,1]),statusSecondary:t.i64.cast([0,1]),startTimeMs:r[1]})},function(o){return r[2]=t.i64.cast([0,0]),r[3]=new t.Map,r[3].set("query",e[0]),r[3].set("supported_types",e[1]),r[3].set("session_id",e[2]),r[3].set("surface_type",e[4]),r[3].set("selected_participants",e[5]),r[3].set("group_id",e[6]),r[3].set("community_id",e[8]),r[3].set("thread_id",e[7]),r[3].set("query_id",e[3]),r[4]=t.createArray(),r[10]=(r[4].push("search_primary"),r[4]),r[5]=t.i64.of_float(Date.now()),r[10]=(r[4].push(t.i64.to_string(r[5])),r[4]),r[6]=t.toJSON(r[4]),r[7]=t.toJSON(r[3]),t.storedProcedure(n("LSIssueNewTask"),r[6],t.i64.cast([0,30]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),r[2])},function(o){return r[8]=new t.Map,r[8].set("query",e[0]),r[8].set("supported_types",e[1]),r[8].set("session_id",e[2]),r[8].set("surface_type",e[4]),r[8].set("selected_participants",e[5]),r[8].set("group_id",e[6]),r[8].set("community_id",e[8]),r[8].set("thread_id",e[7]),r[8].set("query_id",e[3]),r[9]=t.toJSON(r[8]),t.storedProcedure(n("LSIssueNewTask"),"search_secondary",t.i64.cast([0,31]),r[9],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):(a=l.item,0)})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSSearchIssueSearchQueryStoredProcedure",e.__tables__=["search_queries"],a.exports=e}),null);
__d("LSIssueSearchQueryStoredProcedure",["LSIssueSearchQuery","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueSearchQuery"),a.query,a.supportedTypes,a.sessionId,a.queryId,a.surfaceType,a.selectedParticipants,a.groupId,a.threadId,a.communityId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSSearchRequestStatusType",[],(function(t,n,r,o,a,i){var e=Object.freeze({PENDING:1,COMPLETE:2,FAILED:3});i.default=e}),66);
__d("LSWhatsAppConnectStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({WHATSAPP_NOT_ADDRESSABLE:0,WHATSAPP_ADDRESSABLE:1,WHATSAPP_DUAL_SEND_ELIGIBLE:2,WHATSAPP_DUAL_SEND_WEB_ELIGIBLE:3,WHATSAPP_DUAL_SEND_XAPP_ELIGIBLE:4,WHATSAPP_DST_ELIGIBLE:5,WHATSAPP_GDST_ELIGIBLE:9,WHATSAPP_DST_GDST_ELIGIBLE:13,WHATSAPP_DSI_ELIGIBLE:17,WHATSAPP_DST_DSI_ELIGIBLE:21,WHATSAPP_GDST_DSI_ELIGIBLE:25,WHATSAPP_DST_GDST_DSI_ELIGIBLE:29,WHATSAPP_DST_REAL_TEXT_SHADOW_ELIGIBLE:33});i.default=e}),66);
__d("MAWBumpThread",["ODS","ReQL","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.description,r=t.lastActivityTs,a=t.lastMessageCtaType,i=t.lastReadTs,l=t.threadKey,s=t.txn,u=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(s.threads).getKeyRange(l));if(u==null)return(e||(e=o("ODS"))).bumpEntityKey(3185,"armadillo_thread_bump","missing_thread");var c=babelHelpers.extends({},u,{lastActivityTimestampMs:r!=null?r:u.lastActivityTimestampMs,lastMessageCtaType:a,lastReadWatermarkTimestampMs:i!=null?i:u.lastReadWatermarkTimestampMs});yield s.threads.put(c)}),u.apply(this,arguments)}l.threadMutation_DEPRECATED=s}),98);
__d("MAWCreateOptimisticSecureMessage",["EntMessageReplyType","I64","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSQuickReplyType","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBridgeBuildMsg","MAWMsgReplySnippet","MessagingAttachmentType","QPLUserFlow","ReQL","asyncToGeneratorRuntime","isMWBumpMessage","qpl","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n,r){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){if(n==null)return[void 0,void 0];var i=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.messages).getKeyRange(t,n.timestampMs,n.messageId));r("QPLUserFlow").addPoint(r("qpl")._(25313175,"1551"),"get_reply_msg_end",{instanceKey:a});var l=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.attachments).getKeyRange(t,n.messageId));return r("QPLUserFlow").addPoint(r("qpl")._(25313175,"1551"),"get_reply_attachment_end",{instanceKey:a}),[i,l]}),c.apply(this,arguments)}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(t));return n==null?void 0:n.firstName}),m.apply(this,arguments)}function p(e,t,n,r){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i){var l;if(n!=null){var s=r("isMWBumpMessage")(n.replyType)&&n.replyToUserId!=null?n.replyToUserId:n.senderId,u=yield d(t,s),c=n.replyStatus!=null?(e||(e=o("I64"))).to_int32(n.replyStatus)===r("LSReplyMessageStatus").DELETED:!1;return(l=o("MAWMsgReplySnippet").buildLocalizedReplySnippetLegacy({isAuthorMe:!0,isBumpMsg:i,isDeletedMsg:c,recipientName:u,replySenderIsMe:(e||(e=o("I64"))).equal(s,a)}))==null?void 0:l.toString()}}),_.apply(this,arguments)}function f(t){if(t!=null){var n=t.attachmentType;return(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER))?t.previewUrl:void 0}}function g(t){if(t!=null)return(e||(e=o("I64"))).equal(t==null?void 0:t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))?(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").PHOTO):(e||(e=o("I64"))).equal(t==null?void 0:t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER))?(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").STICKER):(e||(e=o("I64"))).equal(t==null?void 0:t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))?(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").VIDEO):(e||(e=o("I64"))).equal(t==null?void 0:t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))?(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").GIF):(e||(e=o("I64"))).equal(t==null?void 0:t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE))||(e||(e=o("I64"))).equal(t==null?void 0:t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO))?(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE):(s||(s=o("LSIntEnum"))).ofNumber(r("LSReplyMessageAttachmentType").OTHER)}function h(e,t,n,r,o,a,i,l,s,u,c,d,m,p){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a,i,l,c,d,m,_,h,y,C,b){var v=yield o("sendToSentQPLLogger").measureSendToSentPerformance("optimistic_message_get_reply",d,function(){return u(t,l,a,d)}),S=v[0],R=v[1],L=o("MAWBridgeBuildMsg").buildOptimisticMessage(i,S,m,C),E=yield o("sendToSentQPLLogger").measureSendToSentPerformance("optimistic_message_reply_snippet",d,function(){return p(e,S,n,b===!0)}),k=babelHelpers.extends({},L,{authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),displayedContentTypes:s.ofNumber(y),hasQuickReplies:!1,hotEmojiSize:c,isAdminMessage:!1,isCollapsed:!1,isUnsent:!1,messageId:_,offlineThreadingId:_,primarySortKey:h,quickReplyType:s.ofNumber(r("LSQuickReplyType").NONE),replyAttachmentType:g(R),replyMediaPreviewHeight:R==null?void 0:R.previewHeight,replyMediaPreviewWidth:R==null?void 0:R.previewWidth,replyMediaUrl:f(R),replyMediaUrlMimeType:R==null?void 0:R.playableUrlMimeType,replySnippet:E,replySourceId:a==null?void 0:a.messageId,replySourceType:a!=null?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:a!=null?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE):void 0,replyType:b===!0?(s||(s=o("LSIntEnum"))).ofNumber(r("EntMessageReplyType").BUMP):void 0,senderId:n,sendStatus:s.ofNumber(r("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:s.ofNumber(1),textHasLinks:!1,threadKey:l,timestampMs:h,transportKey:"WhatsApp",viewFlags:s.ofNumber(0)});return k}),y.apply(this,arguments)}l.buildOptimisticLsMessage=h}),98);
__d("MAWFetchXMABlob",["FBLogger","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var o=t.descriptionForLogging,a=t.url,i=t.xmaContentType;return a==null||a===""?(e||(e=n("Promise"))).resolve():window.fetch(a).then(function(e){return e.blob()}).catch(function(t){return r("FBLogger")("messenger_web_sharing").mustfix("Error fetching url in xma share from %s, with XMA content type %s and error %s",o,i,t),(e||(e=n("Promise"))).resolve()})}l.fetchBlob=s}),98);
__d("MAWFetchXMADataUtils",["FBLogger","LSXmaContentType","MAWFetchXMABlob","MAWGetImageSpec","MAWParseXMAFBConfig","Promise","WAArmadilloXMA.pb","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s={failed_to_fetch_blob_for_xma_share:"Failed to fetch blob xma data for MAWShareAttachent",failed_to_fetch_json_for_xma_share:"Failed execute MAWShareAttachment_LinkPreviewQuery for MAWShareAttachent",failed_to_parse_json_for_xma_share:"Failed to fetch blob xma data for MAWShareAttachent"};function u(e){var t=Object.entries(r("LSXmaContentType")).find(function(t){var n=t[0],r=t[1];return e===r&&o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE[n]!=null}),n=t!=null?o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE[t[0]]:void 0;if(n!==void 0)return o("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:n,silentExposure:!0})?n:(r("FBLogger")("messenger_web_sharing").mustfix("Unsupported XMA Target Type in sending path: "+n),o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE)}function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=t.favicon_blob,i=t.header_image_blob,l=t.overlayIconGlyph,s=t.preview_blob,u=s==null?void 0:new File([s],"preview",{type:s.type}),c=a==null?void 0:new File([a],"favicon",{type:a.type}),d=i==null?void 0:new File([i],"header",{type:i.type});o("sendToSentQPLLogger").markSendToSentPoint(r,"preview_favicon_spec_start");var m=l===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE?(e||(e=n("Promise"))).resolve({height:2,width:2}):u!=null?o("MAWGetImageSpec").getImageSpec_DEPRECATED(u):(e||(e=n("Promise"))).resolve(),p=c!=null?o("MAWGetImageSpec").getImageSpec_DEPRECATED(c):(e||(e=n("Promise"))).resolve(),_=d!=null?o("MAWGetImageSpec").getImageSpec_DEPRECATED(d):(e||(e=n("Promise"))).resolve(),f=yield(e||(e=n("Promise"))).all([m,p,_]),g=f[0],h=f[1],y=f[2];o("sendToSentQPLLogger").markSendToSentPoint(r,"preview_favicon_spec_ready");var C=u==null||g==null?void 0:{file:u,height:g.height,width:g.width},b=c==null||h==null?void 0:{file:c,height:h.height,width:h.width},v=d==null||y==null?void 0:{file:d,height:y.height,width:y.width};return{faviconFileArgs:b,headerImageFileArgs:v,previewFileArgs:C}}),d.apply(this,arguments)}function m(e,t,n,r,o,a){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i,l,u,c){var d=yield(e||(e=n("Promise"))).all([[(t==null?void 0:t.startsWith("ls"))===!0?null:t,"favicon"],[a,"image"],[i,"preview"],[l,"header_image"]].map(function(e){return o("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"MAWFetchXMAData_"+e[1],url:e[0],xmaContentType:c}).then(function(e){return e!=null?e:void 0})})).catch(function(e){return u.forEach(function(e){o("sendToSentQPLLogger").markSendToSentFail(e,"failed_to_fetch_blob_for_xma_share")}),r("FBLogger")("messenger_web_sharing").catching(e).mustfix(s.failed_to_fetch_blob_for_xma_share),[void 0,void 0,void 0,void 0]}),m=d[0],p=d[1],_=d[2],f=d[3];return[m,p,_,f]}),p.apply(this,arguments)}l.XMA_DATA_ERRORS=s,l.convertXmaContentTypeToMessageType=u,l.makeXMAFileArgs=c,l.getPreviewBlobs=m}),98);
__d("MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9840669832713841"}),null);
__d("MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql",["MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"url"}],t=[{alias:null,args:[{fields:[{kind:"Variable",name:"url",variableName:"url"}],kind:"ObjectValue",name:"params"}],concreteType:"XFBXMAPreviewData",kind:"LinkedField",name:"xma_preview_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_receiver_fetch_supported",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_cta_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitle_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"xma_content_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_url",storageKey:null},{alias:null,args:null,concreteType:"XFBXMAPreviewDataCtaDataConnection",kind:"LinkedField",name:"cta_data",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBXMACtaData",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cta_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_action_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_native_url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",selections:t},params:{id:n("MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation"),metadata:{},name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("MAWUnshimUrl",["CometLinkShimUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null){var t=o("CometLinkShimUtils").getLinkShimInfo(e,void 0,void 0,void 0,void 0,void 0,!0);return t.shimmed?t.unshimmedHref:e}}l.unshimUrl=e}),98);
__d("MAWFetchXMAData",["fbt","CometRelay","ConstUriUtils","FBLogger","LSXmaContentType","MAWFetchXMADataUtils","MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql","MAWUnshimUrl","MSGDataclassTypes.flow","Promise","WAArmadilloXMA.pb","asyncToGeneratorRuntime","getJSEnumSafe","isFacebookURI","isStringNullOrEmpty","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(e,t){var n;return t.forEach(function(e){o("sendToSentQPLLogger").addSendToSentAnnotations(e,{string:{xma_data_result:"private"}})}),{defaultCTA:{actionUrl:o("MAWUnshimUrl").unshimUrl(e),buttonType:(n=o("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:o("MAWUnshimUrl").unshimUrl(e),title:s._(/*BTDS*/"_j[\"Private post\",\"599d20d959e0009397c73fb9edb426dd\",1]").toString()},linkType:"internal",overlayIconGlyph:n.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE,preview_blob:void 0,title_text:s._(/*BTDS*/"Facebook").toString(),transportLayerForLogging:"sender_copy",xma_message_type:n.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,xmaTargetTypeForLogging:n.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE}}function d(t,r){return o("CometRelay").fetchQuery(t,e!==void 0?e:e=n("MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql"),{url:r}).toPromise()}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a,i,l,s,u,m,p=yield d(e,t).catch(function(e){n.forEach(function(t){o("sendToSentQPLLogger").markSendToSentFail(t,"failed_to_fetch_json_for_xma_share",e)}),r("FBLogger")("messenger_web_sharing").catching(e).mustfix(o("MAWFetchXMADataUtils").XMA_DATA_ERRORS.failed_to_fetch_json_for_xma_share)});n.forEach(function(e){o("sendToSentQPLLogger").markSendToSentPoint(e,"fetch_json_for_xma_share_end")});var _=p==null?void 0:p.xma_preview_data;if(_==null)return n.forEach(function(e){o("sendToSentQPLLogger").addSendToSentAnnotations(e,{string:{xma_data_result:"empty"}})}),c(t,n);if(_.is_public!==!0)return c(t,n);n.forEach(function(e){o("sendToSentQPLLogger").addSendToSentAnnotations(e,{string:{xma_data_result:"public"}})});var f={defaultCTA:{actionUrl:o("MAWUnshimUrl").unshimUrl(t),buttonType:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:o("MAWUnshimUrl").unshimUrl(t),title:(a=_.default_cta_title)!=null?a:void 0},linkType:"internal",title_text:(i=(l=_.title_text)!=null?l:_.header_title)!=null?i:void 0},g=r("getJSEnumSafe")(r("LSXmaContentType"),_.xma_content_type),h=o("MAWFetchXMADataUtils").convertXmaContentTypeToMessageType(g),y=_.post_id,C=_.is_receiver_fetch_supported===!0;if(C&&y!=null){var b={__typename:"XMSGMsgrXmaContentRefDataclass",action_type:o("MSGDataclassTypes.flow").XmsgMsgrXmaActionType.Share,content_type:o("MSGDataclassTypes.flow").XmsgMsgrReceiverFetchContentType.Statusupdate,fetch_params:{__typename:"XMSGMsgrReceiverFetchXmaStatusUpdateFetchParams",post_id:y},xma_content_type:r("getJSEnumSafe")(r("LSXmaContentType"),_.xma_content_type),xma_layout_type:o("MSGDataclassTypes.flow").XmsgMsgrReceiverFetchXmaLayoutType.Single};return babelHelpers.extends({},f,{contentRef:JSON.stringify(b),transportLayerForLogging:"receiver_fetch",xma_message_type:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH,xmaTargetTypeForLogging:h})}var v=yield o("MAWFetchXMADataUtils").getPreviewBlobs(_.favicon_url,null,_.preview_url,_.header_image_url,n,g),S=v[0],R=v[1],L=v[2],E=v[3];return babelHelpers.extends({},f,{ctas:(s=_.cta_data)==null||(s=s.nodes)==null?void 0:s.map(function(e){var t,n=o("MAWUnshimUrl").unshimUrl(r("isStringNullOrEmpty")(e.cta_action_url)?void 0:e.cta_action_url),a=o("MAWUnshimUrl").unshimUrl(r("isStringNullOrEmpty")(e.cta_native_url)?void 0:e.cta_native_url);return{actionUrl:n,buttonType:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,ctaType:"xma_web_url",nativeUrl:a,title:(t=e.cta_title)!=null?t:void 0}}),favicon_blob:S!=null?S:void 0,header_image_blob:E!=null?E:void 0,header_title:r("isStringNullOrEmpty")(_.title_text)?void 0:(u=_.header_title)!=null?u:void 0,preview_blob:L!=null?L:void 0,subtitle_text:(m=_.subtitle_text)!=null?m:void 0,transportLayerForLogging:"sender_copy",xma_message_type:h,xmaTargetTypeForLogging:h})}),p.apply(this,arguments)}function _(e,t,a){var i,l=o("ConstUriUtils").getUri(t),s=l==null||(i=l.setSubDomain("www"))==null?void 0:i.toString();if(s==null)return(u||(u=n("Promise"))).resolve({linkType:"unknown",transportLayerForLogging:"sender_copy",xmaTargetTypeForLogging:null});var c=o("MAWUnshimUrl").unshimUrl(t);if(c!=null){var d=o("ConstUriUtils").getUri(c);if(d!=null&&!r("isFacebookURI")(d))return(u||(u=n("Promise"))).resolve({linkType:"external",transportLayerForLogging:"sender_copy",xma_message_type:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,xmaTargetTypeForLogging:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE})}return a.forEach(function(e){o("sendToSentQPLLogger").markSendToSentPoint(e,"fetch_json_for_xma_share_start")}),m(e,s,a)}l.fetchXMAData=_}),226);
__d("MAWOptimisticMessageUtils",["I64","LSAuthorityLevel","LSHotEmojiSize","LSIntEnum","MAWAckLevel","MAWAdminMsg","MAWBumpThread","MAWLocalizationType","MAWMsgType","MessagingAttachmentType","ReQL","WAJids","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(){return o("WATimeUtils").millisTime()}function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var r=yield o("ReQL").firstAsync(o("ReQL").fromTableDescending(t.threads.index("lastActivityTimestampMs")));return r==null||(e||(e=o("I64"))).equal(r.threadKey,n)?null:(e||(e=o("I64"))).add(r.lastActivityTimestampMs,e.one)}),d.apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.threadKey,r=yield c(e,n);yield o("MAWBumpThread").threadMutation_DEPRECATED({description:"MAWOptimisticMessageUtils",lastActivityTs:r,lastReadTs:r,threadKey:n,txn:e})}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.optimisticMediaAttachment,r=t.threadKey,a=C(n.type);if(a!=null){var i=yield c(e,r);yield o("MAWBumpThread").threadMutation_DEPRECATED({description:"MAWCreateOptimisticSecureMessageWithAttachment",lastActivityTs:i,lastReadTs:i,threadKey:r,txn:e})}}),f.apply(this,arguments)}function g(e){var t=e.ephemeralSettings,n=e.externalId,r=e.threadJid,a=e.ts;return{ack:o("MAWAckLevel").ACK.partialOptimistic,altIndex:void 0,author:o("WAJids").AUTHOR_ME,ephemeralSetting:t!=null?t:void 0,externalId:n,isForwarded:!1,specialTextSize:void 0,threadJid:r,ts:o("WATimeUtils").castMilliSecondsToUnixTime(a)}}function h(e){var t=e.commands,n=e.content,r=e.initiatingSource,o=e.isFirstMsg,a=e.mentionedJids,i=e.optimisticMsg,l=e.quote,s=e.specialTextSize,u=e.threadSource;return{commands:t==null?void 0:t.slice(),content:n,initiatingSource:r,isFirstMsg:o,isForwarded:!1,mentionedJids:a==null?void 0:a.slice(),openMessageOtid:void 0,openMessageParticipantCount:void 0,optimisticMsg:i,participantCount:void 0,quote:l,source:u,specialTextSize:s}}function y(t){var n=t.optimisticMediaAttachment,a=t.threadKey,i=t.timestampMsI64,l={actionUrl:t.actionUrl,attachmentFbid:t.offlineAttachmentId,attachmentIndex:(e||(e=o("I64"))).zero,attachmentType:t.attachmentType,authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC),filename:n==null?void 0:n.filename,gifPlayback:t.gifPlayback,hasMedia:!e.equal(t.attachmentType,s.ofNumber(r("MessagingAttachmentType").XMA)),hasXma:e.equal(t.attachmentType,s.ofNumber(r("MessagingAttachmentType").XMA)),isHd:t.isHd,isSharable:!1,messageId:t.messageExternalId,offlineAttachmentId:t.offlineAttachmentId,receiverFetchId:t.contentRef,subtitleText:t.subtitleText,threadKey:a,timestampMs:i,titleText:t.titleText,transportKey:"WhatsApp",xmaContentType:t.xmaContentType};if(n){if(l=babelHelpers.extends({},l,{filesize:(e||(e=o("I64"))).of_float(n.file.size),previewUrl:n.url}),n.type==="image"||n.type==="animated_image"||n.type==="video"||n.type==="sticker"){var u,c,d,m;l=babelHelpers.extends({},l,{previewHeight:(u=n.thumbnailSpec)!=null&&u.height?(e||(e=o("I64"))).of_float((c=n.thumbnailSpec)==null?void 0:c.height):void 0,previewWidth:(d=n.thumbnailSpec)!=null&&d.width?(e||(e=o("I64"))).of_float((m=n.thumbnailSpec)==null?void 0:m.width):void 0})}n.type==="audio"&&(l=babelHelpers.extends({},l,{waveformData:n.waveformString}))}return l}function C(e){switch(e){case"animated_image":return o("MAWAdminMsg").buildLocalizedString([],[],o("MAWLocalizationType").CURRENT_USER_SEND_GIF);case"image":return o("MAWAdminMsg").buildLocalizedString([],[],o("MAWLocalizationType").CURRENT_USER_SEND_IMAGE);case"video":return o("MAWAdminMsg").buildLocalizedString([],[],o("MAWLocalizationType").CURRENT_USER_SEND_VIDEO);case"audio":return o("MAWAdminMsg").buildLocalizedString([],[],o("MAWLocalizationType").CURRENT_USER_SEND_AUDIO);case"document":return o("MAWAdminMsg").buildLocalizedString([],[],o("MAWLocalizationType").CURRENT_USER_SEND_ATTACHMENT);case"sticker":return o("MAWAdminMsg").buildLocalizedString([],[],o("MAWLocalizationType").CURRENT_USER_SEND_STICKER);default:return null}}function b(e){switch(e){case(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER):return o("MAWMsgType").MSG_TYPE.STICKER;case(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):return o("MAWMsgType").MSG_TYPE.IMAGE;case(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):return o("MAWMsgType").MSG_TYPE.GIF;case(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):return o("MAWMsgType").MSG_TYPE.VIDEO;case(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):return o("MAWMsgType").MSG_TYPE.PTT;default:return o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE}}function v(t){if(t!=null){if((e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL)))return 1;if((e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").MEDIUM)))return 2;if((e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").LARGE)))return 3}}l.getOptimisticMessageTimestamp=u,l.getOptimisticThreadBumpTimestamp=c,l.optimisticBumpThread=m,l.optimisticBumpThreadMedia=_,l.buildMAWOptimisticBaseMsg=g,l.buildMAWBaseSendMsgArgs=h,l.buildOptimisticAttachment=y,l.lsAttachmentTypeToMsgType=b,l.getSpecialTextSize=v}),98);
__d("MAWSendFileMsgTypes",["WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return o("WAStanzaUtils").toStanzaId(e)}l.toOfflineAttachmentIDFromStanzaId=e,l.toOfflineAttachmentIDFromString=s}),98);
__d("MAWVerifyThreadCutoverDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWVerifyThreadCutover").__setRef("MAWVerifyThreadCutoverDeferred");l.default=e}),98);
__d("MNetContactItemType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CONTACT:0,NON_CONTACT:1,GROUP:2,PAGE:3,BOT:4,GAME:5,IG_USER:6,IG_THREAD:7,STICKER:8,INTEROP_THREAD:9,MSGR_THREAD:10,TEXT_SUGGESTION:11,COMMUNITY_MESSAGING_THREAD:12,IG_PUBLIC_CHANNELS:13,SIDE_CONVERSATIONS_COMMUNITY_MESSAGING_THREAD:14,COMMUNITY_MESSAGING_THREAD_FOR_CC_SECTION:15,BROADCAST_CHAT:16,MSGR_PUBLIC_CHANNEL:17,MSGR_SOCIAL_CHANNEL:18,NETEGO_IG_PUBLIC_CHANNELS:19,CONTACT_BIRTHDAY:20});i.default=e}),66);
__d("MWLSThreadTitle",["fbt","I64","LSMessagingThreadTypeUtil","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e){return e.length>4?"("+e.length+") "+e.join(", "):e.join(", ")}function c(e){switch(e.length){case 0:return r("gkx")("22885")?"":s._(/*BTDS*/"\u0baa\u0b99\u0bcd\u0b95\u0bc7\u0bb1\u0bcd\u0baa\u0bbe\u0bb3\u0bb0\u0bcd\u0b95\u0bb3\u0bcd \u0b87\u0bb2\u0bcd\u0bb2\u0bc8");case 1:return e[0];case 2:return s._(/*BTDS*/"{participant1} \u0bae\u0bb1\u0bcd\u0bb1\u0bc1\u0bae\u0bcd {participant2}",[s._param("participant1",e[0]),s._param("participant2",e[1])]);case 3:return s._(/*BTDS*/"{participant1}, {participant2} \u0bae\u0bb1\u0bcd\u0bb1\u0bc1\u0bae\u0bcd {participant3}",[s._param("participant1",e[0]),s._param("participant2",e[1]),s._param("participant3",e[2])]);default:return s._(/*BTDS*/"{participant1}, {participant2} \u0bae\u0bb1\u0bcd\u0bb1\u0bc1\u0bae\u0bcd {others_count} \u0baa\u0bc7\u0bb0\u0bcd",[s._param("participant1",e[0]),s._param("participant2",e[1]),s._param("others_count",String(e.length-2))])}}function d(t,n,r,a,i,l,s){if(s===void 0&&(s=!1),t!=null)return t;var d=o("LSMessagingThreadTypeUtil").isGroup(a),m=r.filter(function(t){return!(e||(e=o("I64"))).equal(t.contact_id,n)});return d?s?u(m.map(i)):c(m.map(i)):r.length!==1?c(m.map(l)):l(r[0])}function m(e,t,n,r,o){return o===void 0&&(o=!1),d(e,t,n,r,function(e){var t=e.name,n=e.nickname;return n!=null?n:t},function(e){var t=e.actual_name,n=e.nickname;return n!=null?n:t},o).toString()}function p(e,t,n,r){return d(e,t,n,r,function(e){var t=e.actual_name;return t},function(e){var t=e.actual_name;return t}).toString()}function _(e,t,n,r){return d(e,t,n,r,function(e){var t=e.actual_name,n=e.secondary_name;return n!=null?n:t},function(e){var t=e.actual_name,n=e.secondary_name;return n!=null?n:t}).toString()}l.getDefaultThreadTitle=m,l.getThreadTitleWithFullName=p,l.getThreadTitleWithSecondaryNames=_}),226);
__d("MWChatTemporarySearchResult",["DisappearingMessagesMode","FBLogger","I64","LSContactBitOffset","LSContactType","LSContactTypeExact","LSContactViewerRelationship","LSInstagramE2EEEligibility","LSIntEnum","LSMessagingThreadTypeUtil","LSRestrictionType","LSThreadBitOffset","LSWhatsAppConnectStatus","MAWDefaultE2eeOneToOneEligibility","MWChatSearchResultType","MWChatTemporarySearchResultUtils","MWLSContactTypeExactUtils","MWLSThreadTitle","MWSearchStandardResultTypeMappings","getLSMediaContactProfilePictureUrl","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(6))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(7))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(8))?!0:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(9))}function c(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(16))||u(t)?r("MWChatSearchResultType").USER:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(3))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(14))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(13))?r("MWChatSearchResultType").GROUP:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4))?r("MWChatSearchResultType").PAGE:(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(5))?r("MWChatSearchResultType").MESSAGE:(r("FBLogger")("messenger_web").warn("Unknown Search Result Type "+(e||(e=o("I64"))).to_string(t)),r("MWChatSearchResultType").USER)}function d(e,t){return!r("gkx")("23433")||!r("gkx")("6710")||t==null?!1:!!(t.startsWith("@")||t.trim().length===t.length&&t.indexOf(".")!==-1||t.trim()===e)}function m(e){return(e==null?void 0:e.threadType)==null?!1:o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(e.threadType)}function p(e,t){var n=d(e.username,t);if(n&&e.username!=null)return e.username;var r=o("MWLSContactTypeExactUtils").isIgContact(e.contactTypeExact);return r&&e.secondaryName!=null?e.secondaryName:""}function _(e){var t=d(e.contextLine,e.query);if(t&&e.contextLine!=null)return e.contextLine;var n=m(e);return n&&e.contextLine!=null||e.contextLine!=null&&r("gkx")("16600")?e.contextLine:""}function f(t,n,a,i,l,u,c){var d,m,_=a.contactType,f=a.contactTypeExact,g=o("MWLSContactTypeExactUtils").isIgContact(f),h=p(a,c),y=i!=null?[i.e2eeEligibility,!(e||(e=o("I64"))).equal(i.e2eeEligibility,(s||(s=o("LSIntEnum"))).ofNumber(r("LSInstagramE2EEEligibility").INELIGIBLE))]:[void 0,void 0],C=y[0],b=y[1];return{defaultE2eeThreadOneToOne:o("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({maybeContact:a}),defaultE2eeThreads:o("LSContactBitOffset").has(80,a),displayName:a.name,hasCutoverThread:o("LSContactBitOffset").has(76,a),id:(e||(e=o("I64"))).to_string(a.id),imageUrl:r("getLSMediaContactProfilePictureUrl")(a),isAiBot:e.equal(a.contactTypeExact,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").GENERATIVE_AI_BOT)),isContact:e.equal(a.contactViewerRelationship,s.ofNumber(r("LSContactViewerRelationship").CONTACT_OF_VIEWER)),isDisappearingModeSettingOn:o("LSContactBitOffset").has(94,a),isE2EE:n===!0,isEPD:e.equal(a.restrictionType,s.ofNumber(r("LSRestrictionType").DATA_PRIVACY)),isGroupsXacEligible:o("LSContactBitOffset").has(68,a),isInstagramAccount:g,isInstamadilloCutover:o("LSContactBitOffset").has(95,a),isInteropEligible:o("LSContactBitOffset").has(67,a),isTTLCClipEnabled:o("LSContactBitOffset").has(96,a),isTTLCGenericXMAShareEnabled:o("LSContactBitOffset").has(97,a),isTTLCMediaShareEnabled:o("LSContactBitOffset").has(98,a),isTTLCStoryShareEnabled:o("LSContactBitOffset").has(99,a),isVerified:(d=o("LSContactBitOffset").has(23,a))!=null?d:!1,isViewerUnconnected:o("MWChatTemporarySearchResultUtils").isViewerUnconnectedForContact(a),isWAEligible:b,matchedTerms:u,rankingScore:t,reachabilityStatus:a.contactReachabilityStatusType,resultIgid:(m=i==null?void 0:i.igId)!=null?m:void 0,resultType:(e||(e=o("I64"))).equal(_,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactType").USER))||!((e||(e=o("I64"))).equal(_,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE))||(e||(e=o("I64"))).equal(_,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE_PERSONA)))?r("MWChatSearchResultType").USER:r("MWChatSearchResultType").PAGE,searchResultType:o("MWSearchStandardResultTypeMappings").mapContactToSearchStandardResultType(a),searchSource:l,section:o("MWChatTemporarySearchResultUtils").getSectionHeaderForContact(a),subtext:h,supportsE2eeSpamdStorage:i!=null?i.supportsE2eeSpamdStorage:void 0,waAddressable:e.equal(a.waConnectStatus,s.ofNumber(r("LSWhatsAppConnectStatus").WHATSAPP_ADDRESSABLE)),waEligibility:C}}function g(e,t,n){var r=e.threadDescription,a=e.threadName;return r!=null?r:a!=null&&a!==""?o("MWLSThreadTitle").getDefaultThreadTitle(void 0,t,n,e.threadType).toString():""}function h(t,n,r){if(o("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(t.threadType)){var a=n.find(function(t){return!(e||(e=o("I64"))).equal(t.contact_id,r)});if(a!=null)return a.contact_id}}function y(t,n,a,i,l,u,c,d,m){var p,_=g(t,a,u),f=h(t,u,a),y=f!=null?(e||(e=o("I64"))).to_string(f):void 0;return{displayName:o("MWLSThreadTitle").getDefaultThreadTitle(t.threadName,a,u,t.threadType).toString(),id:(e||(e=o("I64"))).to_string(t.threadKey),imageUrl:i,isAiBot:e.equal(t.threadType,(s||(s=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:e.to_int32((p=m==null?void 0:m.igDmSettingsMode)!=null?p:(e||(e=o("I64"))).zero)===r("DisappearingMessagesMode").ON,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,t),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,t),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,t),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,t),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,t),isVerified:!1,matchedTerms:d,otherUserId:y,rankingScore:c,resultType:r("MWChatSearchResultType").GROUP,searchResultType:o("MWSearchStandardResultTypeMappings").mapThreadTypeToSearchStandardResultType(t.threadType),searchSource:n,secondaryImageUrl:l,section:"",subtext:_,threadKey:t.threadKey,threadType:t.threadType}}function C(t,n,a){var i,l,d=(e||(e=o("I64"))).equal(t.type_,(s||(s=o("LSIntEnum"))).ofNumber(1)),m=_(t),p=u(t.type_),f=t.defaultE2eeThreadOneToOne,g=t.defaultE2eeThreads,h=t.hasCutoverThread,y=t.isVerified,C=t.otherUserId,b=t.query,v=t.supportsE2eeSpamdStorage,S=t.waEligibility,R=n!=null&&(i=n.displayName)!=null?i:"";return b===""&&(R=o("MWChatTemporarySearchResultUtils").getSectionHeaderForContactsNullstate()),{canViewerMessage:t.canViewerMessage,communityId:t.communityId,defaultE2eeThreadOneToOne:f!==null?f:void 0,defaultE2eeThreads:g!==null?g:void 0,displayName:t.displayName,hasCutoverThread:h!==null?h:void 0,id:t.resultId,imageUrl:t.profilePicUrl,isAiBot:e.equal(t.type_,s.ofNumber(16)),isContact:d,isDisappearingModeSettingOn:!!t.isDisappearingModeSettingOn,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType),isEPD:!1,isGroupCreationReachable:t.isGroupCreationReachable,isGroupsXacEligible:t.isGroupsXacEligible,isInstagramAccount:p,isInstamadilloCutover:!!t.isInstamadilloCutover,isInteropEligible:t.isInteropEligible,isRestrictedByViewer:t.isRestrictedByViewer,isTTLCClipEnabled:!!t.hasTtlcClipEnabled,isTTLCGenericXMAShareEnabled:!!t.hasTtlcGenericXmaShareEnabled,isTTLCMediaShareEnabled:!!t.hasTtlcMediaShareEnabled,isTTLCStoryShareEnabled:!!t.hasTtlcStoryShareEnabled,isVerified:y!=null?y:!1,isViewerUnconnected:t.isViewerUnconnected,isWAEligible:S!=null?!(e||(e=o("I64"))).equal(S,(s||(s=o("LSIntEnum"))).ofNumber(r("LSInstagramE2EEEligibility").INELIGIBLE)):void 0,otherUserId:C!=null?(e||(e=o("I64"))).to_string(C):void 0,reachabilityStatus:t.reachabilityStatus,restrictionType:t.restrictionType,resultIgid:t.resultIgid,resultType:c(t.type_),searchResultType:o("MWSearchStandardResultTypeMappings").mapServerSearchResultToSearchStandardResultType(t.threadType,t.type_,a),searchSource:a,secondaryImageUrl:t.secondaryProfilePicUrl,section:R,sectionAnalyticsName:n==null?void 0:n.analyticsName,serverSearchResult:t,subtext:m,subtextAdditional:(l=t.secondaryContextLine)!=null?l:"",supportsE2eeSpamdStorage:v,threadJoinLinkHash:t.threadJoinLinkHash,threadType:t.threadType,waAddressable:t.isWaAddressable,waEligibility:t.waEligibility}}l.checkIsInstagramAccount=u,l.getResultType=c,l.fromContact=f,l.fromThread=y,l.fromServerSearchResult=C}),98);
__d("MWChatSearchFetchContactRecommendations",["FBLogger","I64","LSContactBitOffset","LSContactTypeExact","LSContactUtils","LSContactViewerRelationship","LSDatabaseSingleton","LSIntEnum","LSWhatsAppConnectStatus","MAWDefaultE2eeOneToOneEligibility","MNetContactItemType","MNetRankType","MWChatTemporarySearchResult","MWGenAIUtils","MWLSContactTypeExactUtils","ReQL","ReQLSuspense","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(s||(s=o("react"))).useMemo;function p(e){return e<0?-1:e>0?1:0}function _(e){return e.sort(function(e,t){var n=e[0],r=n[0],o=n[1],a=t[0],i=a[0],l=a[1];return i.score!==r.score?p(i.score-r.score):o!=null&&l!=null?p(l.rank-o.rank):l==null&&o==null?0:l!=null?1:-1})}function f(e){var t=e.contactTypeExact,n=e.contactViewerRelationship;return o("MWLSContactTypeExactUtils").isIgContact(t)?(u||(u=o("I64"))).equal(n,(d||(d=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").NOT_CONTACT))?(d||(d=o("LSIntEnum"))).ofNumber(8):(u||(u=o("I64"))).equal(n,(d||(d=o("LSIntEnum"))).ofNumber(r("LSContactViewerRelationship").CONTACT_OF_VIEWER))?(d||(d=o("LSIntEnum"))).ofNumber(6):(d||(d=o("LSIntEnum"))).ofNumber(9):(u||(u=o("I64"))).equal(t,(d||(d=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").GENERATIVE_AI_BOT))?(d||(d=o("LSIntEnum"))).ofNumber(16):(d||(d=o("LSIntEnum"))).ofNumber(1)}function g(e){return e.map(function(e,t){var n,a=e[0],i=a[0],l=a[1],s=e[1];if(l==null||!(l!=null&&l.name)){if(l!=null&&!(l!=null&&l.name)){var c,m;r("FBLogger")("messenger_web_search").warn("Non-null contact without name field found in search results. contact_type: %s; contact_type_exact: %s",(u||(u=o("I64"))).to_string((c=l.contactType)!=null?c:(u||(u=o("I64"))).minus_one),u.to_string((m=l.contactTypeExact)!=null?m:(u||(u=o("I64"))).minus_one))}return}var p=l.contactTypeExact,_=(d||(d=o("LSIntEnum"))).toNumber(i.contactType),g=_===r("MNetContactItemType").GROUP?2:1,h;switch(_){case r("MNetContactItemType").CONTACT:h=f(l);break;case r("MNetContactItemType").GROUP:h=(d||(d=o("LSIntEnum"))).ofNumber(3);break;case r("MNetContactItemType").PAGE:case r("MNetContactItemType").BOT:case r("MNetContactItemType").GAME:case r("MNetContactItemType").STICKER:h=(d||(d=o("LSIntEnum"))).ofNumber(4);break;case r("MNetContactItemType").IG_THREAD:case r("MNetContactItemType").INTEROP_THREAD:case r("MNetContactItemType").MSGR_THREAD:h=(d||(d=o("LSIntEnum"))).ofNumber(5);break;case r("MNetContactItemType").IG_USER:h=(d||(d=o("LSIntEnum"))).ofNumber(6);break;default:h=(d||(d=o("LSIntEnum"))).ofNumber(2)}var y={blockedByViewerStatus:l.blockedByViewerStatus,contextLine:(n=l.secondaryName)!=null?n:"",defaultE2eeThreadOneToOne:o("MAWDefaultE2eeOneToOneEligibility").isContactDefaultE2eeOneToOneEligible({maybeContact:l}),defaultE2eeThreads:o("LSContactBitOffset").has(80,l),displayName:l.name,globalIndex:(u||(u=o("I64"))).of_int32(t),hasCutoverThread:o("LSContactBitOffset").has(76,l),isGroupsXacEligible:o("LSContactBitOffset").has(68,l),isInteropEligible:o("MWLSContactTypeExactUtils").isIgContact(p)?o("LSContactBitOffset").has(67,l):void 0,isVerified:o("LSContactBitOffset").has(23,l),isViewerUnconnected:o("LSContactBitOffset").hasWithDefault(64,l,!0),isWaAddressable:u.equal(l.waConnectStatus,d.ofNumber(r("LSWhatsAppConnectStatus").WHATSAPP_ADDRESSABLE)),profilePicUrl:r("getLSMediaContactProfilePictureUrl")(l),query:"",resultId:u.to_string(l.id),resultIgid:s==null?void 0:s.igId,threadType:d.ofNumber(g),type_:h,waEligibility:s==null?void 0:s.e2eeEligibility},C=o("MWChatTemporarySearchResult").fromServerSearchResult(y,void 0,"offline_nullstate");return[C,l]}).filter(Boolean)}function h(e,t){var n;return(n=o("ReQL")).leftJoin(n.leftJoin(n.fromTableAscending(e.tables.ranking_scores.index("scoreTypeContactId")).getKeyRange(t),n.fromTableAscending(e.tables.contacts)),n.fromTableAscending(e.tables.ig_contact_info))}function y(t){var n=o("react-compiler-runtime").c(8),a;n[0]!==t?(a=t===void 0?(d||(d=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE):t,n[0]=t,n[1]=a):a=n[1];var l=a,s=(e||(e=r("useReStore")))(),u,c;n[2]!==l||n[3]!==s?(u=function(){return h(s,l)},c=[l,s],n[2]=l,n[3]=s,n[4]=u,n[5]=c):(u=n[4],c=n[5]);var m=o("ReQLSuspense").useArray(u,c,i.id+":250"),p;return n[6]!==m?(p=g(_(m)).filter(C),n[6]=m,n[7]=p):p=n[7],p}function C(e){var t=e[0],n=e[1];return t.isAiBot===!1&&o("MWGenAIUtils").isMetaAIContact(t.id)===!1&&!o("LSContactUtils").isContactRestricted(n)}function b(e){return e===void 0&&(e=(d||(d=o("LSIntEnum"))).ofNumber(r("MNetRankType").MESSENGER_USER_SEARCH_NULLSTATE)),(c||(c=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(t){return o("ReQL").toArrayAsync(h(t,e))}).then(function(e){return g(_(e)).filter(function(e){var t=e[0],n=e[1];return!o("LSContactUtils").isContactRestricted(n)})})}function v(e,t,n){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=yield o("ReQL").toArrayAsync(h(e,t));return g(_(r)).filter(function(e){var t=e[0],r=e[1];return!(o("LSContactUtils").isContactRestricted(r)||((u||(u=o("I64"))).equal(n,(d||(d=o("LSIntEnum"))).ofNumber(5))||(u||(u=o("I64"))).equal(n,(d||(d=o("LSIntEnum"))).ofNumber(11)))&&o("LSContactUtils").isContactBlocked({blockedByViewerStatus:r.blockedByViewerStatus}))}).map(function(e){var t=e[0];return t})}),S.apply(this,arguments)}l.sortInPlaceQueryResults=_,l.mapToServerSearchResults=g,l.makeQuery=h,l.useChatSearchContactRecommendations=y,l.fetchRecommendations=b,l.fetchContacts=v}),98);
__d("MWLSParticipant",["I64","LSContactBlockedByViewerStatus","LSContactGender","LSContactType","LSContactWorkForeignEntityType","LSIntEnum","LSMailboxType","MWLSContactTypeExactUtils","ReQL","getLSMediaContactProfilePictureUrl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={actual_name:"",blocked_by_viewer_status:(e||(e=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contact_id:(s||(s=o("I64"))).zero,contactType:e.ofNumber(r("LSContactType").UNKNOWN),delivered_watermark_timestamp_ms:s.zero,gender:e.ofNumber(r("LSContactGender").UNKNOWN),is_admin:!1,is_messenger_user:!1,mailbox_type:e.ofNumber(r("LSMailboxType").MESSENGER),name:"",nickname:void 0,profile_picture_url:"",rank:0,read_action_timestamp_ms:s.zero,read_watermark_timestamp_ms:s.zero,secondary_name:void 0,thread_key:s.zero,work_company_name:void 0,work_foreign_entity_info:e.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN),work_job_title:void 0};function c(t){var n,a,i=t[0],l=t[1],s=i.nickname,u=l.authorityLevel,c=l.blockedByViewerStatus,d=l.contactTypeExact,m=l.firstName,p=l.name,_=l.secondaryName,f=l.waConnectStatus;return{actual_name:p,authority_level:u,blocked_by_viewer_status:c,contact_id:i.contactId,contactType:l.contactType,delivered_watermark_timestamp_ms:i.deliveredWatermarkTimestampMs,gender:l.gender,is_admin:(n=i.isAdmin)!=null?n:!1,is_messenger_user:l.isMessengerUser,mailbox_type:(e||(e=o("LSIntEnum"))).ofNumber(r("LSMailboxType").MESSENGER),name:(a=s!=null?s:m)!=null?a:p,nickname:s,profile_picture_url:r("getLSMediaContactProfilePictureUrl")(l),rank:l.rank,read_action_timestamp_ms:i.readActionTimestampMs,read_watermark_timestamp_ms:i.readWatermarkTimestampMs,secondary_name:o("MWLSContactTypeExactUtils").isIgContact(d)?_:void 0,thread_key:i.threadKey,wa_connect_status:f,work_company_name:l.workCompanyName,work_foreign_entity_info:l.workForeignEntityType,work_job_title:l.workJobTitle}}function d(e,t,n){return o("ReQL").mergeJoin(o("ReQL").fromTableAscending(e.tables.participants).getKeyRange(n),t).map(c)}l.empty=u,l.projectOpen=c,l.getAllInOpenThread=d}),98);
__d("MWSearchThreadUtils",["I64","LSIntEnum","LSMessageSearchType","MAWChatJid","MWLSParticipant","MWLSThreadTitle","Promise","ReQL","asyncToGeneratorRuntime","getLSMediaContactProfilePictureUrl","getLSMediaThreadPictureUrl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,i){var l=r("getLSMediaThreadPictureUrl")(t);if(l!=null)return(u||(u=n("Promise"))).resolve([l,void 0]);var s,c=(s=o("ReQL")).toArrayAsync(s.leftJoin(s.fromTableAscending(i.tables.participants,[]).getKeyRange(t.threadKey),s.fromTableAscending(i.tables.contacts)).map(function(e){var t=e[0],n=e[1];return n}).filter(Boolean)),d=c.then(function(t){var n=t.length===1&&(e||(e=o("I64"))).equal(t[0].id,a);return t.sort(function(e,t){return e.rank-t.rank}).filter(function(t){return(e||(e=o("I64"))).equal(t.id,a)?n:!0}).map(function(e){return r("getLSMediaContactProfilePictureUrl")(e)})}).then(function(e){var t=e[0];return t!=null?[t,e[1]]:["",void 0]});return d}function d(e,t){return o("ReQL").toArrayAsync(o("MWLSParticipant").getAllInOpenThread(t,o("ReQL").fromTableAscending(t.tables.contacts),e.threadKey))}function m(t,n,a,i,l){if((e||(e=o("I64"))).equal(l,(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageSearchType").MESSAGE))&&i!=null){var u,c=(u=a.find(function(e){return e.contact_id===i.id}))==null?void 0:u.nickname;return c!=null?c:i.name}return o("MWLSThreadTitle").getThreadTitleWithFullName(n.threadName,t,a,n.threadType)}function p(e,t,n,r){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=yield o("MAWChatJid").toThreadKeyMaybe(e.tables,t);return a==null?null:f(e,a,n,r)}),_.apply(this,arguments)}function f(e,t,n,r){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=yield o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(t));return a==null?null:h(e,a,n,r)}),g.apply(this,arguments)}function h(e,t,n,r){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,o){var a=yield(u||(u=n("Promise"))).all([c(t,r,e),d(t,e)]),i=a[0],l=i[0],s=i[1],p=a[1],_=yield m(r,t,p,void 0,o);return{profilePicUrl:l,secondaryProfilePicUrl:s,threadDisplayName:_,threadKey:t.threadKey,threadType:t.threadType}}),y.apply(this,arguments)}l.getThreadPics=c,l.getThreadParticipants=d,l.getThreadDisplayName=m,l.getThreadDataForSearchResult=p,l.getThreadDataByThreadKey=f}),98);
__d("MWChatSearchFetchThreadRecommendations",["I64","LSAuthorityLevel","LSContactBitOffset","LSContactUtils","LSDatabaseAfterInitSyncSingleton","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","LSWhatsAppConnectStatus","MWChatSearchResultType","MWGetOtherContactOrSelf","MWLSThreadTitle","MWSearchThreadUtils","Promise","ReQL","asyncToGeneratorRuntime","hasDefaultThreadOneToOneCapability"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){return o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(e.tables._user_info))}function d(e,t,n,a,i,l,c){var d,p,_=(s||(s=o("I64"))).to_float(t.lastActivityTimestampMs),f={contactId:s.zero,contactType:s.zero,score:_,scoreIndex:s.zero,scoreType:s.zero},g=n.length===2?n.find(function(t){return!(s||(s=o("I64"))).equal(t.contact_id,e)}):null;return{defaultE2eeThreadOneToOne:c!=null?c:void 0,displayName:o("MWLSThreadTitle").getDefaultThreadTitle(t.threadName,e,n,t.threadType).toString(),hasCutoverThread:l!=null?l:void 0,id:s.to_string(t.threadKey),imageUrl:a,isAiBot:s.equal(t.threadType,(u||(u=o("LSIntEnum"))).ofNumber(201)),isContact:!1,isDisappearingModeSettingOn:!1,isE2EE:o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType),isEPD:!1,isInstagramAccount:!1,isInstamadilloCutover:o("LSThreadBitOffset").has(214,t),isTTLCClipEnabled:o("LSThreadBitOffset").has(226,t),isTTLCGenericXMAShareEnabled:o("LSThreadBitOffset").has(231,t),isTTLCMediaShareEnabled:o("LSThreadBitOffset").has(228,t),isTTLCStoryShareEnabled:o("LSThreadBitOffset").has(229,t),isVerified:!1,otherUserName:(d=g==null?void 0:g.name)!=null?d:void 0,rankingScore:f,resultType:o("LSMessagingThreadTypeUtil").isGroup(t.threadType)?r("MWChatSearchResultType").GROUP:r("MWChatSearchResultType").USER,searchSource:"offline_nullstate",secondaryImageUrl:i,section:"",subtext:(p=t.threadDescription)!=null?p:"",threadKey:t.threadKey,threadType:t.threadType,waAddressable:o("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(t.threadType)?!m(g):void 0}}function m(e){if(e!=null)return e.authority_level!=null&&(s||(s=o("I64"))).ge(e.authority_level,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT))&&e.wa_connect_status!=null&&(s||(s=o("I64"))).equal(e.wa_connect_status,(u||(u=o("LSIntEnum"))).ofNumber(r("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE))}function p(t){return o("ReQL").toArrayAsync(o("ReQL").fromTableDescending(t.tables.threads.index("parentThreadKeyLastActivityTimestampMs"))).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){var o=yield(e||(e=n("Promise"))).all(r.map(function(e){return g(t,e)}));return r.filter(function(e,t){return!o[t]})});return function(e){return r.apply(this,arguments)}})())}function _(){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("LSDatabaseAfterInitSyncSingleton").LSDatabaseAfterInitSyncSingleton,a=yield(e||(e=n("Promise"))).all([c(t),p(t)]),i=a[0],l=a[1];return e.all(l.map((function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var l=yield(e||(e=n("Promise"))).all([o("MWSearchThreadUtils").getThreadPics(a,i.facebookUserId,t),o("MWSearchThreadUtils").getThreadParticipants(a,t),o("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)?o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.cutover_threads).getKeyRange(a.threadKey)):null,o("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)?r("hasDefaultThreadOneToOneCapability")(a.threadKey,t):null]),s=l[0],u=l[1],c=l[2],m=l[3],p=s[0],_=s[1];return d(i.facebookUserId,a,u,p,_,!!c,m)});return function(e){return a.apply(this,arguments)}})()))}),f.apply(this,arguments)}function g(e,t){return!(o("LSMessagingThreadTypeUtil").isRecentsSectionAllowedTypes(t.threadType)&&o("LSMessagingThreadTypeUtil").isMessengerOrE2EEInbox(t.folderName))||o("LSMessagingThreadTypeUtil").isArmadilloSecureOneToOne(t.threadType)&&(u||(u=o("LSIntEnum"))).toNumber(t.authorityLevel)<r("LSAuthorityLevel").AUTHORITATIVE||o("LSThreadBitOffset").has(44,t)?!0:h(e,t)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield(e||(e=n("Promise"))).all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.contacts).getKeyRange(r.threadKey)),o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(t.tables._user_info).map(function(e){return e.facebookUserId}))]),i=a[0],l=a[1],s=yield o("MWGetOtherContactOrSelf").getOtherContactOrSelf(r.threadKey,l,t),u=s!=null?s:i,c=!1,d=!1,m=!1;return u&&(c=o("LSContactBitOffset").has(28,u)||o("LSContactBitOffset").has(29,u)||u.blockedByViewerStatus!=null&&o("LSContactUtils").isContactBlocked(u),d=o("LSContactUtils").isContactUnreachable(u),m=o("LSContactUtils").isContactRestricted(u)),c||d||m}),y.apply(this,arguments)}l.fetchThreadRecommendations=_,l.shouldFilterBlockedOrUnreachableUser=h}),98);
__d("MWChatSearchIssueLightspeedQuery",["I64","LSContactBlockedByViewerStatus","LSDatabaseSingleton","LSFactory","LSIntEnum","LSIssueSearchQueryStoredProcedure","LSPlatformWaitForTaskCompletion","LSSearchRequestStatusType","LSVec","MWChatSearchFetchContactRecommendations","MWChatSearchFetchThreadRecommendations","MWChatSearchResultType","MWChatTemporarySearchResult","Promise","ReQL","asyncToGeneratorRuntime","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("gkx")("26360");function m(e,t){var n=e[0],a=e[1],i=[],l=0;n.sort(function(e,t){return(s||(s=o("I64"))).compare(e.globalIndex,t.globalIndex)}),a.sort(function(e,t){return(s||(s=o("I64"))).compare(e.globalIndex,t.globalIndex)});for(var u=0,c=n.length;u<c;++u)for(var d=n[u];l<a.length&&(s||(s=o("I64"))).ge(a[l].globalIndex,d.startIndex)&&(s||(s=o("I64"))).le(a[l].globalIndex,d.endIndex);){var m=a[l];i.push(o("MWChatTemporarySearchResult").fromServerSearchResult(m,d,"server")),l+=1}return i.filter(function(e){return t?!0:e.resultType!==r("MWChatSearchResultType").GROUP})}function p(e,t,n){var a=n.query;return(c||(c=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(n){return n.runInTransaction(function(n){return r("LSIssueSearchQueryStoredProcedure")(r("LSFactory")(n),{query:a,supportedTypes:r("LSVec").ofArray(e),surfaceType:t})},"readwrite",void 0,void 0,i.id+":105").then(function(){return n})})}function _(t,a,i,l,d){var p=d.query;return a.length>0&&!a.includes("server")?(e||(e=n("Promise"))).resolve([]):(c||(c=o("LSDatabaseSingleton"))).LSDatabaseSingleton.then(function(e){return r("LSPlatformWaitForTaskCompletion")(e,function(e){return r("LSIssueSearchQueryStoredProcedure")(r("LSFactory")(e),{query:p,supportedTypes:r("LSVec").ofArray(t),surfaceType:i})},"issueSearchQuery").then(function(){return e})}).then((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a,i=(a=o("ReQL")).toArrayAsync(a.fromTableAscending(t.tables.server_search_results).getKeyRange(p).filter(function(e){return(s||(s=o("I64"))).equal(e.blockedByViewerStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))})),c=a.toArrayAsync(a.fromTableAscending(t.tables.server_search_sections).getKeyRange(p)),d=yield(e||(e=n("Promise"))).all([c,i]);return m(d,l)});return function(e){return t.apply(this,arguments)}})())}function f(t,r,a,i){return o("MWChatSearchFetchContactRecommendations").fetchRecommendations(i).then(function(t){return(e||(e=n("Promise"))).resolve(t.map(function(e){var t=e[0];return t}))})}function g(e,t){return!!(!t.has(e.resultType)||!e.isE2EE&&e.defaultE2eeThreadOneToOne===!0||e.hasCutoverThread===!0||e.isAiBot)}function h(e){var t=[],n=new Set;return e.forEach(function(e){n.has(e.id)||(t.push(e),n.add(e.id))}),t}function y(){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("MWChatSearchFetchThreadRecommendations").fetchThreadRecommendations();if(e.length===0)return[];var t=new Set([r("MWChatSearchResultType").USER,r("MWChatSearchResultType").GROUP]),n=h(e);return n.filter(function(e){return!g(e,t)})}),C.apply(this,arguments)}function b(e,t,n,a){var i=[],l=[],c=[],d=function(){i.length===0||l.length===0||c.length!==1||(s||(s=o("I64"))).equal(c[0].statusPrimary,(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING))||a(m([l,i],n))},p=e.tables.server_search_results.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.server_search_results).getKeyRange(t)),function(e){return i=e,d()})}),_=e.tables.server_search_sections.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.server_search_sections).getKeyRange(t)),function(e){return l=e,d()})}),f=e.tables.search_queries.subscribe(function(){r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.search_queries).getKeyRange(t).filter(function(e){return!(s||(s=o("I64"))).equal(e.statusPrimary,(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING))})),function(e){return c=e,d()})});return function(){p(),_(),f()}}function v(t,a,i,l){return t.tables.search_queries.subscribe(function(c,d){var p=c[0];p!==a||d.operation==="delete"||(s||(s=o("I64"))).equal(d.value.statusPrimary,(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING))||r("promiseDone")((e||(e=n("Promise"))).all([o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.server_search_results).getKeyRange(a)),o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.server_search_sections).getKeyRange(a))]).then(function(e){var t=e[0],n=e[1];l(m([n,t],i))}))})}function S(e,t,n,a,i,l){var c=i.query;return d?r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.search_queries).getKeyRange(c).filter(function(e){return!(s||(s=o("I64"))).equal(e.statusPrimary,(u||(u=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING))})).then(function(r){return r==null||r.length!==1?p(t,n,i):o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.server_search_results).getKeyRange(c)).then(function(r){return r==null||r.length===0?p(t,n,i):o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.server_search_sections).getKeyRange(c)).then(function(e){if(e==null||e.length===0)return p(t,n,i);l(m([e,r],a))})})})):r("promiseDone")(p(t,n,i)),b(e,i.query,a,l)}function R(e,t,n,o,a,l){var s=v(e,a.query,o,l);return r("promiseDone")(e.runInTransaction(function(e){return e.search_queries.delete(a.query,n)},"readwrite",void 0,void 0,i.id+":436").then(function(){return p(t,n,a)})),s}l.toSearchResults=m,l.makeSearchQuery=p,l.fetchResults=_,l.fetchRecommendations=f,l.shouldFilterSearchResultsForSharingNS=g,l.dedupeByThreadKey=h,l.fetchThreadRecommendations=y,l.requestResults=S,l.requestResults_T200619723=R}),98);
__d("MWLSSearchIssueSearchQuerySupportedTypes",["LSIntEnum","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[(e||(e=o("LSIntEnum"))).ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(13)].concat(r("gkx")("24112")?[(e||(e=o("LSIntEnum"))).ofNumber(14)]:[]),u=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2)],c=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9),e.ofNumber(5)],d=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],m=[e.ofNumber(1)],p=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(4),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)].concat([e.ofNumber(13)]),_=[e.ofNumber(1),e.ofNumber(2)],f=[e.ofNumber(1),e.ofNumber(2),e.ofNumber(6),e.ofNumber(7),e.ofNumber(8),e.ofNumber(9)],g=[e.ofNumber(1),e.ofNumber(3),e.ofNumber(2)],h=[e.ofNumber(1),e.ofNumber(2)];l.allSupportedTypes=s,l.supportedTypesForMSplitUser=u,l.allSupportedTypesWithMessageSearch=c,l.armadilloSupportedTypes=d,l.onlyContacts=m,l.broadcastFlowSupportedTypes=p,l.addParticipantBase=_,l.addParticipantXac=f,l.socialChannelsSupportedTypes=g,l.communityDirectInviteSupportedTypes=h}),98);
__d("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EE").__setRef("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred");l.default=e}),98);
__d("ProfilePlusAdminRoleInfoContextualMessage.react",["fbt","ix","FDSContextualMessage.react","FDSIcon.react","FDSText.react","ProfilePlusCometGlobalPageRolesStrings","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=r("react"));function d(){var e=o("react-compiler-runtime").c(2),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=c.jsx(r("FDSText.react"),{type:"body3",children:o("ProfilePlusCometGlobalPageRolesStrings").ADMIN_ROLE_INFO_MESSAGE}),e[0]=t):t=e[0];var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=c.jsx(r("FDSContextualMessage.react"),{body:t,icon:c.jsx(r("FDSIcon.react"),{"aria-label":s._(/*BTDS*/"Accessibility label for admin role information icon"),icon:o("fbicon")._(u("479178"),24),size:24}),paddingTop:16,type:"secondary"}),e[1]=n):n=e[1],n}l.default=d}),226);
__d("ProfilePlusFBUserReauthGlobalPasswordStep.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","CometRelay","FBBrowserPasswordEncryption","FDSButton.react","FDSFormTextInput.react","FDSText.react","ProfilePlusCometGlobalPageRolesStrings","ProfilePlusMarkReauthedMutation","promiseDone","react","react-compiler-runtime","useCometAlertDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo,p=c.useState;function _(e){var t=o("react-compiler-runtime").c(38),n=e.appAdminInviteAction,a=e.isUpdatePermission,i=e.keyID,l=e.publicKey,c=e.updatePermissionCallback,d=a===void 0?!1:a,m=p(""),_=m[0],f=m[1],g=p(""),h=g[0],y=g[1],C=p(null),b=C[0],v=C[1],S;t[0]===Symbol.for("react.memo_cache_sentinel")?(S=function(t){f(t),y(""),v(null)},t[0]=S):S=t[0];var R=S,L=o("CometRelay").useRelayEnvironment(),E=r("useCometAlertDialog")(),k;t[1]===Symbol.for("react.memo_cache_sentinel")?(k=Math.floor(Date.now()/1e3).toString(),t[1]=k):k=t[1];var I=k,T=p(!1),D=T[0],x=T[1],$;t[2]!==n||t[3]!==L||t[4]!==d||t[5]!==c?($=function(t){o("ProfilePlusMarkReauthedMutation").profilePlusMarkReauthedAction(L,t,function(e){var t;(e==null||(t=e.admin_management_mark_reauthed)==null?void 0:t.reauth_is_successful)===!0?d&&c!=null?c():n():(x(!1),y(s._(/*BTDS*/"\u0ba4\u0bb5\u0bb1\u0bbe\u0ba9 \u0b95\u0b9f\u0bb5\u0bc1\u0b9a\u0bcd\u0b9a\u0bca\u0bb2\u0bcd. \u0bae\u0bc0\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd \u0bae\u0bc1\u0baf\u0bb2\u0bb5\u0bc1\u0bae\u0bcd.")),v("ERROR"))})},t[2]=n,t[3]=L,t[4]=d,t[5]=c,t[6]=$):$=t[6];var P=$,N;t[7]!==i||t[8]!==_||t[9]!==P||t[10]!==l||t[11]!==E?(N=function(){x(!0),r("promiseDone")(o("FBBrowserPasswordEncryption").encryptPassword(i,l,_,I),function(e){P(e)},function(){E({body:null,title:s._(/*BTDS*/"\u0b89\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0b95\u0b9f\u0bb5\u0bc1\u0b9a\u0bcd\u0b9a\u0bca\u0bb2\u0bcd\u0bb2\u0bc8 \u0bae\u0bc0\u0ba3\u0bcd\u0b9f\u0bc1\u0bae\u0bcd \u0ba8\u0bbf\u0bb0\u0baa\u0bcd\u0baa\u0bc1\u0b95.")})})},t[7]=i,t[8]=_,t[9]=P,t[10]=l,t[11]=E,t[12]=N):N=t[12];var M=N,w,A;t[13]===Symbol.for("react.memo_cache_sentinel")?(w={key:r("CometKeys").ENTER},A=s._(/*BTDS*/"Enter"),t[13]=w,t[14]=A):(w=t[13],A=t[14]);var F;t[15]!==M?(F=[{command:w,description:A,handler:M,triggerFromInputs:!0}],t[15]=M,t[16]=F):F=t[16];var O=F,B;t[17]===Symbol.for("react.memo_cache_sentinel")?(B={className:"x1m7g9aj"},t[17]=B):B=t[17];var W,q,U;t[18]===Symbol.for("react.memo_cache_sentinel")?(W={className:"x78zum5 xdt5ytf"},q=u.jsx("div",{className:"x1cnzs8 xv54qhq xx6bls6 xf7dkkf",children:u.jsx(r("FDSText.react"),{testid:void 0,type:"body2",children:o("ProfilePlusCometGlobalPageRolesStrings").ADD_ADMIN_REAUTH_STEP_BODY})}),U={className:"xexx8yu xv54qhq xx6bls6 xf7dkkf"},t[18]=W,t[19]=q,t[20]=U):(W=t[18],q=t[19],U=t[20]);var V;t[21]===Symbol.for("react.memo_cache_sentinel")?(V=s._(/*BTDS*/"\u0b95\u0b9f\u0bb5\u0bc1\u0b9a\u0bcd\u0b9a\u0bca\u0bb2\u0bcd"),t[21]=V):V=t[21];var H;t[22]!==h||t[23]!==_||t[24]!==b?(H=u.jsx("div",babelHelpers.extends({},U,{children:u.jsx(r("FDSFormTextInput.react"),{helperText:h,label:V,onValueChange:R,testid:void 0,type:"password",validationState:b,value:_})})),t[22]=h,t[23]=_,t[24]=b,t[25]=H):H=t[25];var G,z;t[26]===Symbol.for("react.memo_cache_sentinel")?(G={className:"x78zum5 x1q0g3np x13a6bvl"},z={className:"x13fj5qh xz9dl7a xv54qhq xsag5q8 xf7dkkf x18d1o2c"},t[26]=G,t[27]=z):(G=t[26],z=t[27]);var j;t[28]===Symbol.for("react.memo_cache_sentinel")?(j=s._(/*BTDS*/"\u0b89\u0bb1\u0bc1\u0ba4\u0bbf\u0b9a\u0bc6\u0baf\u0bcd\u0b95"),t[28]=j):j=t[28];var K;t[29]!==D||t[30]!==M?(K=u.jsx("div",babelHelpers.extends({},G,{children:u.jsx("div",babelHelpers.extends({},z,{children:u.jsx(r("FDSButton.react"),{disabled:D,label:j,onPress:M,testid:void 0})}))})),t[29]=D,t[30]=M,t[31]=K):K=t[31];var Q;t[32]!==H||t[33]!==K?(Q=u.jsxs("div",babelHelpers.extends({},W,{children:[q,H,K]})),t[32]=H,t[33]=K,t[34]=Q):Q=t[34];var X;return t[35]!==O||t[36]!==Q?(X=u.jsx("div",babelHelpers.extends({},B,{children:u.jsx(r("CometComponentWithKeyCommands.react"),{commandConfigs:O,children:Q})})),t[35]=O,t[36]=Q,t[37]=X):X=t[37],X}l.default=_}),226);
__d("ProfilePlusGlobalAppAdminInviteMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23877097678584961"}),null);
__d("ProfilePlusGlobalAppAdminInviteMutation.graphql",["ProfilePlusGlobalAppAdminInviteMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"XFBGlobalPagesRootAdminInvitePayload",kind:"LinkedField",name:"xfb_global_pages_root_admin_invite",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_invite_sent",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"ProfilePlusGlobalAppAdminInviteMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"ProfilePlusGlobalAppAdminInviteMutation",selections:t},params:{id:n("ProfilePlusGlobalAppAdminInviteMutation_facebookRelayOperation"),metadata:{},name:"ProfilePlusGlobalAppAdminInviteMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("ProfilePlusGlobalAppAdminInviteMutation",["CometRelay","ProfilePlusGlobalAppAdminInviteMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("ProfilePlusGlobalAppAdminInviteMutation.graphql");function u(e,t,n,r){var a={input:{admin_id:n,global_root_id:t}};o("CometRelay").commitMutation(e,{mutation:s,onCompleted:r,onError:function(t){alert(t.source.exception.message)},variables:a})}l.profilePlusGlobalAppAdminInviteAction=u}),98);
__d("ProfilePlusReauthGlobalPasswordStep.react",["fbt","CometRelay","ProfilePlusFBUserReauthGlobalPasswordStep.react","ProfilePlusGlobalAppAdminInviteMutation","cometPushToast","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(12),n=e.adminID,a=e.adminName,i=e.isUpdatePermission,l=e.keyID,s=e.onClose,c=e.pageID,d=e.publicKey,_=e.updatePermissionCallback,f=i===void 0?!1:i,g=o("CometRelay").useRelayEnvironment(),h=p,y=m,C;t[0]!==n||t[1]!==a||t[2]!==g||t[3]!==s||t[4]!==c?(C=function(){o("ProfilePlusGlobalAppAdminInviteMutation").profilePlusGlobalAppAdminInviteAction(g,c,n,function(e){var t,n=e==null||(t=e.xfb_global_pages_root_admin_invite)==null?void 0:t.is_invite_sent;n===!0?o("cometPushToast").cometPushSimpleToast(h(a)):o("cometPushToast").cometPushSimpleToast(y()),s()})},t[0]=n,t[1]=a,t[2]=g,t[3]=s,t[4]=c,t[5]=C):C=t[5];var b=C,v;return t[6]!==b||t[7]!==f||t[8]!==l||t[9]!==d||t[10]!==_?(v=u.jsx(r("ProfilePlusFBUserReauthGlobalPasswordStep.react"),{appAdminInviteAction:b,isUpdatePermission:f,keyID:l,publicKey:d,updatePermissionCallback:_}),t[6]=b,t[7]=f,t[8]=l,t[9]=d,t[10]=_,t[11]=v):v=t[11],v}function m(){return s._(/*BTDS*/"Unable to invite admin. Please try again.")}m.displayName=m.name+" [from "+i.id+"]";function p(e){return s._(/*BTDS*/"{admin_name} has been successfully invited as an admin.",[s._param("admin_name",e)])}p.displayName=p.name+" [from "+i.id+"]",l.default=d}),226);
__d("ProfilePlusUpdateAccessGlobalConfirmationComponent.react",["AddOnStartOverride.react","FDSListCell.react","FDSProfilePhoto.react","FDSText.react","FDSTextPairing.react","ProfilePlusAdminRoleInfoContextualMessage.react","ProfilePlusCometGlobalPageRolesStrings","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(10),n=e.name,a=e.profileUri,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={className:"x78zum5 xdt5ytf x169u96n"},l=s.jsxs("div",{className:"xexx8yu xv54qhq x18d9i69 xf7dkkf",children:[s.jsx(r("FDSText.react"),{type:"headlineEmphasized3",children:o("ProfilePlusCometGlobalPageRolesStrings").TYPEAHEAD_SEARCH_ADMIN_HEADER}),s.jsx("div",{className:"xyamay9",children:s.jsx(r("ProfilePlusAdminRoleInfoContextualMessage.react"),{})})]}),t[0]=i,t[1]=l):(i=t[0],l=t[1]);var u;t[2]===Symbol.for("react.memo_cache_sentinel")?(u={className:"xf7dkkf xyamay9"},t[2]=u):u=t[2];var c;t[3]!==a?(c=s.jsx(r("AddOnStartOverride.react"),{children:s.jsx("div",babelHelpers.extends({},u,{children:s.jsx(r("FDSProfilePhoto.react"),{shape:"circle",size:60,source:a})}))}),t[3]=a,t[4]=c):c=t[4];var d;t[5]!==n?(d=s.jsx(r("FDSTextPairing.react"),{headline:s.jsx(r("FDSText.react"),{type:"headline3",children:n}),level:3}),t[5]=n,t[6]=d):d=t[6];var m;return t[7]!==c||t[8]!==d?(m=s.jsxs("div",babelHelpers.extends({},i,{children:[l,s.jsx("div",{children:s.jsx(r("FDSListCell.react"),{addOnEndVerticalAlign:"center",addOnStart:c,content:d})})]})),t[7]=c,t[8]=d,t[9]=m):m=t[9],m}l.default=u}),98);
__d("ProfilePlusGiveFullAccessGlobalConfirmationStep.react",["FDSButton.react","ProfilePlusAdminPermissionsContentFBT","ProfilePlusReauthGlobalPasswordStep.react","ProfilePlusUpdateAccessGlobalConfirmationComponent.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(23),n=e.keyID,a=e.onClose,i=e.pageID,l=e.publicKey,u=e.pushPage,c=e.searchEntry,d;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==u||t[5]!==c.id||t[6]!==c.name?(d=function(){u(function(){return s.jsx(r("ProfilePlusReauthGlobalPasswordStep.react"),{adminID:c.id,adminName:c.name,keyID:n,onClose:a,pageID:i,publicKey:l})},{title:o("ProfilePlusAdminPermissionsContentFBT").getGiveAccessTitle()})},t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=u,t[5]=c.id,t[6]=c.name,t[7]=d):d=t[7];var m=d,p;t[8]!==c.photoURI?(p={uri:c.photoURI},t[8]=c.photoURI,t[9]=p):p=t[9];var _=p,f;t[10]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x78zum5 xdt5ytf x12f24lm x6ikm8r x1odjw0f x1cnzs8"},t[10]=f):f=t[10];var g;t[11]!==a||t[12]!==_||t[13]!==c.name?(g=s.jsx(r("ProfilePlusUpdateAccessGlobalConfirmationComponent.react"),{name:c.name,onClose:a,profileUri:_}),t[11]=a,t[12]=_,t[13]=c.name,t[14]=g):g=t[14];var h,y;t[15]===Symbol.for("react.memo_cache_sentinel")?(h={className:"x78zum5 x1q0g3np x2lah0s x13a6bvl x1odjw0f"},y={className:"x13fj5qh xwzsa0r xz9dl7a xv54qhq xsag5q8 x1c1uobl"},t[15]=h,t[16]=y):(h=t[15],y=t[16]);var C;t[17]===Symbol.for("react.memo_cache_sentinel")?(C=o("ProfilePlusAdminPermissionsContentFBT").getGiveAccessTitle(),t[17]=C):C=t[17];var b;t[18]!==m?(b=s.jsx("div",babelHelpers.extends({},h,{children:s.jsx("div",babelHelpers.extends({},y,{children:s.jsx(r("FDSButton.react"),{label:C,onPress:m,testid:void 0})}))})),t[18]=m,t[19]=b):b=t[19];var v;return t[20]!==g||t[21]!==b?(v=s.jsxs("div",babelHelpers.extends({},f,{children:[g,b]})),t[20]=g,t[21]=b,t[22]=v):v=t[22],v}l.default=u}),98);
__d("ProfilePlusSearchAdminGlobalTypeaheadStep.react",["fbt","BaseTypeahead.react","CometTypeaheadInputRoundedStrategy.react","CometTypeaheadLayoutInlineStrategy.react","CometTypeaheadViewEmptyState.react","FDSText.react","ProfilePlusAddPermissionsTypeaheadViewItem.react","ProfilePlusAdminRoleInfoContextualMessage.react","ProfilePlusCometGlobalPageRolesStrings","ProfilePlusGiveFullAccessGlobalConfirmationStep.react","react","react-compiler-runtime","useCometTypeaheadViewListStrategy","useProfilePlusAddPermissionsSearchDataSource"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useState,d={typeaheadInput:{alignItems:"x6s0dn4",display:"x78zum5",height:"x1vqgdyp",paddingBottom:"xsag5q8",paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0}},m=50;function p(e){var t=o("react-compiler-runtime").c(18),n=e.keyID,a=e.onClose,i=e.pageID,l=e.publicKey,p=e.pushPage,_=e.usePageRename,f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f={limit:m},t[0]=f):f=t[0];var g=r("useProfilePlusAddPermissionsSearchDataSource")(f),h=c(""),y=h[0],C=h[1],b;t[1]!==n||t[2]!==a||t[3]!==i||t[4]!==l||t[5]!==p||t[6]!==_?(b=function(t){p(function(){return u.jsx(r("ProfilePlusGiveFullAccessGlobalConfirmationStep.react"),{keyID:n,onClose:a,pageID:i,publicKey:l,pushPage:p,searchEntry:{description:t.rawData.description,id:t.rawData.id,name:t.rawData.name,photoURI:t.rawData.photoURI},usePageRename:_})},{title:o("ProfilePlusCometGlobalPageRolesStrings").ADMIN_MODAL_TITLE})},t[1]=n,t[2]=a,t[3]=i,t[4]=l,t[5]=p,t[6]=_,t[7]=b):b=t[7];var v=b,S;t[8]===Symbol.for("react.memo_cache_sentinel")?(S={emptyStateContent:u.jsx("div",{role:"listbox",children:u.jsx(r("CometTypeaheadViewEmptyState.react"),{children:s._(/*BTDS*/"\u0b89\u0b99\u0bcd\u0b95\u0bb3\u0ba4\u0bc1 \u0ba4\u0bc7\u0b9f\u0bb2\u0bcd \u0b89\u0bb3\u0bcd\u0bb3\u0bc0\u0b9f\u0bcd\u0b9f\u0bbf\u0bb1\u0bcd\u0b95\u0bc1 \u0b8e\u0ba4\u0bc1\u0bb5\u0bc1\u0bae\u0bcd \u0baa\u0bca\u0bb0\u0bc1\u0ba8\u0bcd\u0ba4\u0bb5\u0bbf\u0bb2\u0bcd\u0bb2\u0bc8")})}),viewItemStrategyRenderer:r("ProfilePlusAddPermissionsTypeaheadViewItem.react")},t[8]=S):S=t[8];var R=r("useCometTypeaheadViewListStrategy")(S),L,E;t[9]===Symbol.for("react.memo_cache_sentinel")?(L={className:"x78zum5 xdt5ytf x169u96n"},E=u.jsxs("div",{className:"x1cnzs8 xv54qhq xx6bls6 xf7dkkf",children:[u.jsx(r("FDSText.react"),{type:"headlineEmphasized3",children:o("ProfilePlusCometGlobalPageRolesStrings").TYPEAHEAD_SEARCH_ADMIN_HEADER}),u.jsx("div",{className:"xyamay9",children:u.jsx(r("ProfilePlusAdminRoleInfoContextualMessage.react"),{})})]}),t[9]=L,t[10]=E):(L=t[9],E=t[10]);var k;t[11]===Symbol.for("react.memo_cache_sentinel")?(k=s._(/*BTDS*/"\u0baa\u0bc6\u0baf\u0bb0\u0bcd \u0b85\u0bb2\u0bcd\u0bb2\u0ba4\u0bc1 \u0bae\u0bbf\u0ba9\u0bcd\u0ba9\u0b9e\u0bcd\u0b9a\u0bb2\u0bcd \u0b95\u0bca\u0ba3\u0bcd\u0b9f\u0bc1 \u0ba4\u0bc7\u0b9f\u0bc1\u0b95..."),t[11]=k):k=t[11];var I;t[12]===Symbol.for("react.memo_cache_sentinel")?(I={inputXStyle:d.typeaheadInput},t[12]=I):I=t[12];var T;return t[13]!==g||t[14]!==v||t[15]!==y||t[16]!==R?(T=u.jsxs("div",babelHelpers.extends({},L,{children:[E,u.jsx(r("BaseTypeahead.react"),{dataSource:g,inputStrategyRenderer:r("CometTypeaheadInputRoundedStrategy.react"),layoutStrategyRenderer:r("CometTypeaheadLayoutInlineStrategy.react"),onChange:C,onPressEntry:v,placeholder:k,queryString:y,shouldQueryStringUpdateFromSelectedEntryOnClick:!1,testid:void 0,viewStrategyRenderer:R,xstyles:I})]})),t[13]=g,t[14]=v,t[15]=y,t[16]=R,t[17]=T):T=t[17],T}l.default=p}),226);
__d("ProfilePlusCometGlobalPagesAddAdminDialog.react",["CometComposerViewStateReducersContext","CometDialogComposerPage.react","FDSCard.react","ProfilePlusCometGlobalPageRolesStrings","ProfilePlusSearchAdminGlobalTypeaheadStep.react","decorateMultiStepContainerPushPage","react","react-compiler-runtime","useComposerViewStateDispatcher","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useMemo,_=u.useState;function f(e){var t=o("react-compiler-runtime").c(33),n=e.globalRootPageID,a=e.keyID,i=e.onClose,l=e.publicKey,u=r("useComposerViewStateDispatcher")(),c=d(r("CometComposerViewStateReducersContext")),p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[0]=p):p=t[0];var f=_(p),h=f[0],y=f[1],C;t[1]!==i?(C=function(){y(function(e){return e.length<=1?(i(),e):e.slice(0,-1)})},t[1]=i,t[2]=C):C=t[2];var b=C,v;if(t[3]===Symbol.for("react.memo_cache_sentinel")){var S=function(t,n){y(function(e){return[].concat(e,[t])})};v=r("decorateMultiStepContainerPushPage")(S,null,!1),t[3]=v}else v=t[3];var R=v,L=R.pushPageHandler,E;t[4]===Symbol.for("react.memo_cache_sentinel")?(E=r("uuidv4")(),t[4]=E):E=t[4];var k=E,I;t[5]===Symbol.for("react.memo_cache_sentinel")?(I={},t[5]=I):I=t[5];var T=I,D;t[6]!==i||t[7]!==h.length?(D=function(t,n){var e={hasCustomHeader:!1,onClose:i,withBackButton:(n==null?void 0:n.withoutBackButton)!==!0,withCloseButton:(n==null?void 0:n.withoutCloseButton)!==!0};L(h.length>1?o("ProfilePlusCometGlobalPageRolesStrings").ADMIN_MODAL_PASSWORD_TITLE:o("ProfilePlusCometGlobalPageRolesStrings").ADMIN_MODAL_TITLE,function(e){var n=e.onReturn,r=t;return s.jsx(r,{onReturn:n,setTitle:g})},!1,e)},t[6]=i,t[7]=h.length,t[8]=D):D=t[8];var x=D,$;t[9]===Symbol.for("react.memo_cache_sentinel")?($={isBridgeBuilt:!1,isBridgeRequired:!1},t[9]=$):$=t[9];var P=$,N,M;t[10]!==x||t[11]!==n||t[12]!==a||t[13]!==i||t[14]!==h.length||t[15]!==l?(N=function(){h.length===0&&y([function(e){return s.jsx(r("ProfilePlusSearchAdminGlobalTypeaheadStep.react"),{keyID:a,onClose:i,pageID:n,publicKey:l,pushPage:x,usePageRename:!1})}])},M=[x,n,a,i,h.length,l],t[10]=x,t[11]=n,t[12]=a,t[13]=i,t[14]=h.length,t[15]=l,t[16]=N,t[17]=M):(N=t[16],M=t[17]),m(N,M);var w=h.length>0?h[h.length-1]:null,A;t[18]===Symbol.for("react.memo_cache_sentinel")?(A={className:"xdj266r x11t971q xat24cr xvc5jky x1n7qst7 x1p5oq8j x64bnmy xwxc41k x13jy36j"},t[18]=A):A=t[18];var F=h.length>1,O=h.length>1,B;t[19]!==i||t[20]!==b||t[21]!==F||t[22]!==O?(B={hasCustomHeader:F,onBack:b,onClose:i,withBackButton:O,withCloseButton:!0},t[19]=i,t[20]=b,t[21]=F,t[22]=O,t[23]=B):B=t[23];var W=h.length>1?o("ProfilePlusCometGlobalPageRolesStrings").ADMIN_MODAL_PASSWORD_TITLE:o("ProfilePlusCometGlobalPageRolesStrings").ADMIN_MODAL_TITLE,q;t[24]!==w||t[25]!==b?(q=w?s.jsx(w,{onReturn:b}):s.jsx("div",{}),t[24]=w,t[25]=b,t[26]=q):q=t[26];var U;return t[27]!==u||t[28]!==c||t[29]!==B||t[30]!==W||t[31]!==q?(U=s.jsx("div",babelHelpers.extends({},A,{children:s.jsx(r("FDSCard.react"),{background:"default",dropShadow:1,children:s.jsx(r("CometDialogComposerPage.react"),{creationSessionID:k,dispatcher:u,featureDefinitions:null,options:B,pushPageFeatureBridge:P,pushPageHandler:L,reducers:c,title:W,viewStatePart:T,children:q})})})),t[27]=u,t[28]=c,t[29]=B,t[30]=W,t[31]=q,t[32]=U):U=t[32],U}function g(){}l.default=f}),98);
__d("UnifiedShareSheetConstants",[],(function(t,n,r,o,a,i){"use strict";var e={DISABLED:"disabled",SEND:"send",SEND_SEPARATELY:"send_separately"},l=8,s=84,u={color:"primary-text",fontSize:15};i.SEND_BUTTON_STATUS=e,i.MESSENGER_HSCROLL_PADDING=l,i.MESSENGER_CONTACT_WIDTH=s,i.TEXT_STYLE=u}),66);
__d("UnifiedShareSheetMultiSelectionContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={AddSeletectTarget:function(t){},RemoveSelectedTarget:function(t){},getXMAFileArgsPromise:function(){return null},getXMAPreviewPromise:function(){return null},selectedContacts:new Map,selectedTargets:new Map},c=s.createContext(u),d=c;l.default=d}),98);
__d("createMWChatSearchTypeaheadDataEntry",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n;return{key:e.id,label:e.displayName,rawData:{canViewerMessage:e.canViewerMessage,communityId:e.communityId,defaultE2eeThreadOneToOne:e.defaultE2eeThreadOneToOne,defaultE2eeThreads:e.defaultE2eeThreads,displayName:e.displayName,hasCutoverThread:e.hasCutoverThread,id:e.id,igid:e.resultIgid,imageUrl:e.imageUrl,isAiBot:e.isAiBot,isContact:e.isContact,isDisappearingModeSettingOn:e.isDisappearingModeSettingOn,isE2EE:e.isE2EE,isEPD:e.isEPD,isGroupCreationReachable:e.isGroupCreationReachable,isGroupsXacEligible:!!e.isGroupsXacEligible,isInstagramAccount:!!e.isInstagramAccount,isInstamadilloCutover:e.isInstamadilloCutover,isInteropEligible:e.isInteropEligible!==!1,isRestrictedByViewer:e.isRestrictedByViewer,isTTLCClipEnabled:!!e.isTTLCClipEnabled,isTTLCGenericXMAShareEnabled:!!e.isTTLCGenericXMAShareEnabled,isTTLCMediaShareEnabled:!!e.isTTLCMediaShareEnabled,isTTLCStoryShareEnabled:!!e.isTTLCStoryShareEnabled,isViewerUnconnected:e.isViewerUnconnected,isWAEligible:e.isWAEligible,otherUserId:e.otherUserId,rankingScore:e.rankingScore,reachabilityStatus:e.reachabilityStatus,renderIndex:t,resultType:e.resultType,searchResultType:e.searchResultType,searchSource:e.searchSource,secondaryImageUrl:(n=e.secondaryImageUrl)!=null?n:"",section:e.section,sectionAnalyticsName:e.sectionAnalyticsName,serverSearchResult:e.serverSearchResult,subtext:e.subtext,subtextAdditional:e.subtextAdditional,supportsE2eeSpamdStorage:e.supportsE2eeSpamdStorage,threadType:e.threadType,verificationStatus:e.isVerified?"BLUE_VERIFIED":"NOT_VERIFIED",waAddressable:e.waAddressable,waEligibility:e.waEligibility},type:"entry"}}i.default=e}),66);
__d("mwChatSearchPayloadEnumerate",[],(function(t,n,r,o,a,i){"use strict";var e=["entries"];function l(t){var n,r=t.entries,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=(n=t.params)==null?void 0:n.query,i=r.reduce(function(e,t,n){var r=t.rawData.section;if(r==null)return e;r===""&&e.set(r,0);var o=e.get(r),a=o==null?n:Math.min(o,n);return e.set(r,a),e},new Map),l=r.map(function(e,t){var n=e.key,r=e.label,o=e.rawData,l=o.section;return{key:n,label:r,rawData:babelHelpers.extends({},o,{query:a,renderIndex:t,sectionRenderIndex:l==null?-1:i.get(l)}),type:"entry"}});return babelHelpers.extends({entries:l},o)}i.default=l}),66);
__d("useCometComposerValidateStatusTextLengthForLexical.react",["CometComposerStylingConstants","LexicalText","getTextLengthLimitReachedText","lengthInUTF8Bytes","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t,n=o("react-compiler-runtime").c(10),a=e.lexicalEditor,i=(t=e==null?void 0:e.characterLimit)!=null?t:o("CometComposerStylingConstants").COMPOSER_CHARACTER_LIMIT,l;if(n[0]!==a){var s;l=(s=a==null?void 0:a.getEditorState().read(o("LexicalText").$rootTextContent).length)!=null?s:0,n[0]=a,n[1]=l}else l=n[1];var u=l,m=d(u>i?u:null),p=m[0],_=m[1],f,g;if(n[2]!==a||n[3]!==i||n[4]!==p?(f=function(){if(a!=null)return a.registerTextContentListener(function(e){var t=r("lengthInUTF8Bytes")(e);t>i?_(t):p!=null&&t<=i&&_(null)})},g=[p,i,a],n[2]=a,n[3]=i,n[4]=p,n[5]=f,n[6]=g):(f=n[5],g=n[6]),c(f,g),p!=null){var h;return n[7]!==i||n[8]!==p?(h=r("getTextLengthLimitReachedText")({limit:i,numCharacters:p}),n[7]=i,n[8]=p,n[9]=h):h=n[9],h}return null}l.default=m}),98);
__d("useCometFeedToMessengerReshareV3_group.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometFeedToMessengerReshareV3_group",selections:[{args:null,kind:"FragmentSpread",name:"CometMessengerResharesUpdatedDialog_group"},{alias:null,args:[{kind:"Literal",name:"type",value:"VOICE_SWITCHER_COMPATIBLE"}],concreteType:"AvailableActorsConnection",kind:"LinkedField",name:"available_actors",plural:!1,selections:[{alias:null,args:null,concreteType:"AvailableActorsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:'available_actors(type:"VOICE_SWITCHER_COMPATIBLE")'}],type:"Group",abstractKey:null};a.exports=e}),null);
__d("useCometFeedToMessengerReshareV3",["CometMessengerResharesDialogPlaceholder.react","CometMessengerResharesUpdatedDialog.entrypoint","CometRelay","LSMessagingThreadAttributionType","RelayEnvironmentFactoryProvider","gkx","react","react-compiler-runtime","useCometEntryPointDialog","useCometFeedToMessengerReshareV3_group.graphql","useShareLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useRef;function d(t){var a,i=o("react-compiler-runtime").c(22),l=t.feedLocation,s=t.feedTracking,u=t.groupKey,d=t.shareableID,p=t.sharingComponentName,_=t.storyData,f=t.url,g=o("CometRelay").useFragment(e!==void 0?e:e=n("useCometFeedToMessengerReshareV3_group.graphql"),u),h=r("gkx")("10820"),y=g==null||(a=g.available_actors)==null||(a=a.edges[0])==null||(a=a.node)==null?void 0:a.id,C=o("RelayEnvironmentFactoryProvider").useRelayEnvironmentFactory(),b;i[0]!==y||i[1]!==C?(b=y!=null&&h?C.getForActorID(y):void 0,i[0]=y,i[1]=C,i[2]=b):b=i[2];var v=b,S;i[3]!==f?(S={url:f},i[3]=f,i[4]=S):S=i[4];var R=S,L=c(null),E;i[5]!==v?(E=v!=null?{overrideRelayEnv:v}:void 0,i[5]=v,i[6]=E):E=i[6];var k=r("useCometEntryPointDialog")(r("CometMessengerResharesUpdatedDialog.entrypoint"),R,"button",m,E),I=k[0],T=k[1],D=k[2],x=k[3],$=r("useShareLogger")(),P=$.onOpenBCFButtonClicked,N;i[7]!==l||i[8]!==s||i[9]!==g||i[10]!==P||i[11]!==d||i[12]!==p||i[13]!==I||i[14]!==_||i[15]!==f?(N=function(){P({entry_point:l,feed_tracking:s,is_anything_shared_in_current_session:!1,shareable_entity_fbid:d,sharing_component_name:p}),I({feedLocation:l,feedTracking:s,groupKey:g,isPushPageView:!1,shareableID:d,source:r("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE,storyData:_,url:f})},i[7]=l,i[8]=s,i[9]=g,i[10]=P,i[11]=d,i[12]=p,i[13]=I,i[14]=_,i[15]=f,i[16]=N):N=i[16];var M=N,w;return i[17]!==M||i[18]!==T||i[19]!==D||i[20]!==x?(w={onClick:M,onHoverIn:T,onHoverOut:D,onPressIn:x,triggerRef:L},i[17]=M,i[18]=T,i[19]=D,i[20]=x,i[21]=w):w=i[21],w}function m(e){return u.jsx(r("CometMessengerResharesDialogPlaceholder.react"),{isPushPageView:!1,onClose:e})}m.displayName=m.name+" [from "+i.id+"]",l.default=d}),98);
__d("useCometResharesToasts",["fbt","FDSCheckmarkCircleFilled20Icon","FDSIcon.react","SilenceableErrorMessageUtils","cometPushToast","react","react-compiler-runtime","useCometRouterDispatcher","useNullthrowsViolation","useToasterStateManager"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback,d="CometStoriesReshareToast";function m(e){var t=o("react-compiler-runtime").c(12),n=r("useToasterStateManager")(),a=r("useNullthrowsViolation")(r("useCometRouterDispatcher")()),i;t[0]!==n||t[1]!==a||t[2]!==e?(i=function(i){var t=u.jsx(r("FDSIcon.react"),{color:"positive",icon:r("FDSCheckmarkCircleFilled20Icon"),size:20}),l=i!=null?{label:s._(/*BTDS*/"\u0baa\u0ba4\u0bbf\u0bb5\u0bc8\u0b95\u0bcd \u0b95\u0bbe\u0ba3\u0bcd\u0b95"),onPress:function(){a.go(i,{})}}:void 0;o("cometPushToast").cometPushToast({action:l,icon:t,message:e,testid:d},void 0,n)},t[0]=n,t[1]=a,t[2]=e,t[3]=i):i=t[3];var l=i,c;t[4]!==n?(c=function(t,r,a){if(t!=null){var e=o("SilenceableErrorMessageUtils").getMetadataFromError(t);if(o("SilenceableErrorMessageUtils").shouldHideErrorMessage(e))return}var i=r!=null?o("cometPushToast").cometPushToast:o("cometPushToast").cometPushErrorToast;i({icon:r,message:a?s._(/*BTDS*/"Something went wrong. Please try again. Click here to restore post."):s._(/*BTDS*/"Something went wrong. Please try again."),onPress:(function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t})(function(){a&&a()}),testid:d},void 0,n)},t[4]=n,t[5]=c):c=t[5];var m=c,p;t[6]!==n?(p=function(){o("cometPushToast").cometPushToast({message:s._(/*BTDS*/"Posting..."),testid:d},void 0,n)},t[6]=n,t[7]=p):p=t[7];var _=p,f;return t[8]!==m||t[9]!==_||t[10]!==l?(f={showErrorToast:m,showPostingToast:_,showSuccessToast:l},t[8]=m,t[9]=_,t[10]=l,t[11]=f):f=t[11],f}l.default=m}),226);
__d("useLinkSharingShareUrlWrapperNoop",["react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(1),n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n={generateWrappedShareUrl:c,getWrappedShareUrl:u,getWrappedShareUrlID:s},t[0]=n):n=t[0],n}function s(e){return null}function u(e){return null}function c(){}l.default=e}),98);
__d("useMAWCreateOptimisticSecureMessageWithXMAAttachment",["I64","LSIntEnum","MAWBumpThread","MAWCreateOptimisticSecureMessage","MAWOptimisticMessageUtils","MAWSendFileMsgTypes","MAWVault","MWPActor.react","MessagingAttachmentType","Promise","QPLUserFlow","asyncToGeneratorRuntime","qpl","react-compiler-runtime","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){var e=o("react-compiler-runtime").c(3),t=r("useAsyncReStore")(),a=o("MWPActor.react").useActor(),l;return e[0]!==t||e[1]!==a?(l=function(o){var e=o.actionUrl,l=o.associatedMsgId,s=o.associatedMsgText,c=o.commands,m=o.contentRef,p=o.instanceKey,_=o.isReceiverFetch,f=o.lssTraceApi,g=o.mentionedJids,h=o.messageExternalId,y=o.messageText,C=o.offlineAttachmentId,b=o.onOfflineMsgId,v=o.optimisticMediaAttachment,S=o.reply,R=o.subtitleText,L=o.threadKey,E=o.titleText,k=o.xmaContentType,I=_===void 0?!1:_;return(u||(u=n("Promise"))).resolve(t).then(function(t){return r("QPLUserFlow").addPoint(r("qpl")._(25313175,"1551"),"before_create_optimistic_message_restore_resolved",{instanceKey:p}),t.runInTransaction(function(n){return d({actionUrl:e,associatedMsgId:l,associatedMsgText:s,commands:c,contentRef:m,db:t,instanceKey:p,isReceiverFetch:I,lssTraceApi:f,mentionedJids:g,messageExternalId:h,messageText:y,offlineAttachmentId:C,onOfflineMsgId:b,optimisticMediaAttachment:v,reply:S,senderId:a,subtitleText:R,threadKey:L,titleText:E,txn:n,xmaContentType:k})},"readwrite","ui",void 0,i.id+":93")})},e[0]=t,e[1]=a,e[2]=l):l=e[2],l}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n,a=t.actionUrl,i=t.associatedMsgId,l=t.associatedMsgText,u=t.commands,c=t.contentRef,d=t.db,m=t.instanceKey,p=t.isReceiverFetch,_=p===void 0?!1:p,f=t.lssTraceApi,g=t.mentionedJids,h=t.messageExternalId,y=t.messageText,C=t.offlineAttachmentId,b=t.onOfflineMsgId,v=t.optimisticMediaAttachment,S=t.reply,R=t.senderId,L=t.subtitleText,E=t.threadKey,k=t.titleText,I=t.txn,T=t.xmaContentType;b(h),f==null||f.addMarkerPoint("set_offline_message_external_id_for_ls_message","AppTiming");var D=o("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp(),x=(e||(e=o("I64"))).of_float(D),$=_?536870912:1024,P=yield o("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(d,I,R,S,(n=o("MAWVault").unvault(y))!=null?n:"",E,void 0,m,g,h,x,$,u);yield I.messages.add(P);var N=o("MAWOptimisticMessageUtils").buildOptimisticAttachment({actionUrl:a,attachmentType:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA),contentRef:c,messageExternalId:h,offlineAttachmentId:C,optimisticMediaAttachment:v,senderId:R,subtitleText:L,threadKey:E,timestampMsI64:x,titleText:k,xmaContentType:T});if(yield I.attachments.add(N),i!=null&&l!=null&&l!==""){var M,w=yield o("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(d,I,R,S,(M=o("MAWVault").unvault(l))!=null?M:"",E,void 0,m,g,i,x,1,u);yield I.messages.add(w)}return r("QPLUserFlow").addPoint(r("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:m}),r("QPLUserFlow").addPoint(r("qpl")._(25313175,"1551"),"optimistic_bump_thread_start",{instanceKey:m}),yield o("MAWBumpThread").threadMutation_DEPRECATED({description:"useMAWCreateOptimisticSecureMessageWithXMAAttachment",lastActivityTs:x,lastReadTs:x,threadKey:E,txn:I}),r("QPLUserFlow").addPoint(r("qpl")._(25313175,"1551"),"optimistic_bump_thread_end",{instanceKey:m}),{messageExternalId:h,offlineAttachmentId:o("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(C),offlineMsgTimestamp:D}}),m.apply(this,arguments)}l.useMAWCreateOptimisticSecureMessageWithXMAAttachment=c}),98);
__d("useMWSendAttachment",["$InternalEnum","CometMessengerReshareContext","CometRelay","FBLogger","JSResourceForInteraction","LSDatabaseSingleton","LSMessagingThreadAttributionType","MAWMIC","MAWVerifyThreadCutoverDeferred","MWLSLogSend","MWVersion","MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred","UnifiedShareSheetMultiSelectionContext","WAResultOrError","asyncToGeneratorRuntime","cr:19817","isThreadLevelCutoverEnabled","qex","react","sendToSentQPLLogger","useMAWCreateOptimisticSecureMessageWithXMAAttachment"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=n("$InternalEnum").Mirrored(["USS_H_SCROLL","BCF","FB_EVENT"]);function p(){return r("qex")._("564")===!0?!0:r("qex")._("121")===!0}var _=r("JSResourceForInteraction")("LSShareAttachment").__setRef("useMWSendAttachment");function f(){var e,t,a,i,l=o("CometRelay").useRelayEnvironment(),u=o("useMAWCreateOptimisticSecureMessageWithXMAAttachment").useMAWCreateOptimisticSecureMessageWithXMAAttachment(),f=d(r("UnifiedShareSheetMultiSelectionContext")),g=f.getXMAFileArgsPromise,h=f.getXMAPreviewPromise,y=d(r("CometMessengerReshareContext")),C=y.getXMAFileArgsPromise,b=y.getXMAPreviewPromise,v=(e=(t=h())!=null?t:b())!=null?e:null,S=(a=(i=g())!=null?i:C())!=null?a:null;return c((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,a=e.attachment,i=e.contactWithCapabilityPromises,c=e.lssTraceApi,d=e.offlineMsgId,f=e.reshareTarget,g=e.s2sInstanceKey,h=e.sharingComponent,y=e.source,C=e.thread,b=e.xmaDataPromise,R=e.xmaDataProps,L=e.xmaMsgExternalId,E=p(),k=E||r("isThreadLevelCutoverEnabled")();o("sendToSentQPLLogger").markSendToSentPoint(g,"update_target_deferred_component_load_start");var I=yield r("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred").load();o("sendToSentQPLLogger").markSendToSentPoint(g,"update_target_deferred_component_load_end");var T=o("MAWMIC").duringMIC();o("sendToSentQPLLogger").addSendToSentAnnotations(g,{bool:{during_mic:T}}),o("sendToSentQPLLogger").markSendToSentPoint(g,"update_target_start");var D=yield I(f,(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton,l,"sendAttachment",g,i);o("sendToSentQPLLogger").markSendToSentPoint(g,"update_target_end");var x=D.targetID!==a.targetID?babelHelpers.extends({},a,{targetID:D.targetID}):a;o("MWLSLogSend").logSentHeroInteraction(c,d,{isMessageRequest:!1,mwVersion:o("MWVersion").v2,source:y!=null?y:r("LSMessagingThreadAttributionType").UNKNOWN,threadType:C==null?void 0:C.threadType}),o("sendToSentQPLLogger").markSendToSentPoint(g,"offline_msg_id_generated"),c.addMarkerPoint("offline_msg_id_generated","AppTiming");var $=(t=D.isTargetE2E)!=null?t:E,P=!1;if(o("sendToSentQPLLogger").markSendToSentPoint(g,"verify_thread_cutover_start"),c.addMarkerPoint("verify_thread_cutover_start","AppTiming"),r("MAWVerifyThreadCutoverDeferred")!=null){o("sendToSentQPLLogger").markSendToSentPoint(g,"verify_cutover_deferred_component_load_start");var N=yield r("MAWVerifyThreadCutoverDeferred").load(),M=N.verifyThreadCutoverWithStringInput;o("sendToSentQPLLogger").markSendToSentPoint(g,"verify_cutover_deferred_component_load_end"),P=yield M((s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton,D.targetID)}if(o("sendToSentQPLLogger").markSendToSentPoint(g,"verify_thread_cutover_end"),k&&$||P){if(n("cr:19817")===null)throw o("sendToSentQPLLogger").markSendToSentFail(g,"MAWShareAttachmentDeferred_null"),c.addMarkerPoint("MAWShareAttachmentDeferred_null","AppTiming"),r("FBLogger")("messenger_web_media").mustfixThrow("Failed to fetch MAWShareAttachmentDeferred");o("sendToSentQPLLogger").markSendToSentPoint(g,"share_attachment_deferred_component_load_start");var w=yield n("cr:19817").load(),A=w.shareSecureAttachment;o("sendToSentQPLLogger").markSendToSentPoint(g,"share_attachment_deferred_component_load_end"),o("sendToSentQPLLogger").markSendToSentPoint(g,"share_secure_attachment_start");var F=h===m.USS_H_SCROLL||h===m.FB_EVENT,O=yield A(F?void 0:l,x,D,y,g,"useMWSendAttachment",c,F?R:void 0,b,d,L,u,v,S);return(O==null?void 0:O.success)===!1?o("WAResultOrError").makeError(O.error):(o("sendToSentQPLLogger").markSendToSentPoint(g,"share_secure_attachment_end"),o("WAResultOrError").makeResult({report:(O==null?void 0:O.value)||{description:"removal pending rollout of MAWMessageSendReporterV2",messageType:"fixMe"},target:D}))}else try{var B=yield _.load(),W=B.share;return yield W(babelHelpers.extends({},x,{url:h===m.FB_EVENT?void 0:x.url}),g),o("WAResultOrError").makeResult({report:{description:"open message",messageType:"fixMe"},target:f})}catch(e){throw e}});return function(t){return e.apply(this,arguments)}})(),[u,l])}function g(){return h}function h(){n("cr:19817")==null||n("cr:19817").preload(),r("MAWVerifyThreadCutoverDeferred")==null||r("MAWVerifyThreadCutoverDeferred").preload(),r("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred")==null||r("MaybeUpdateTargetBasedOnODCutoverOrDefaultE2EEDeferred").preload(),_.preload()}l.SharingComponentType=m,l.useMWSendAttachment=f,l.useMWPreloadSendAttachmentComponents=g}),98);