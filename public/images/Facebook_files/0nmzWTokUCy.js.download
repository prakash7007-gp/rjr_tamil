;/*FB_PKG_DELIM*/

__d("UnifiedShareSheetMessengerSuggestedItemsWrapper.react",["CometRelay","CometUnifiedShareSheetGating","FBLogger","FDSHScroll.react","MAWThreadCutover","UnifiedShareSheetDialogContext","UnifiedShareSheetMessengerReshareLightSpeedMultiSelectionTargetItem.react","UnifiedShareSheetMessengerReshareLightSpeedTargetItem.react","UnifiedShareSheetMessengerSeeMoreButton.react","UnifiedShareSheetMessengerSuggestedItem.react","UnifiedShareSheetMessengerSuggestedItemsWrapper_thread.graphql","UnifiedShareSheetMessengerSuggestedMultiSelectionItem.react","isTlcSearchEnabled","react","react-compiler-runtime","useUnifiedShareSheetLogger","useUnifiedShareSheetUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p=c.useMemo,_=r("isTlcSearchEnabled")(),f=o("CometUnifiedShareSheetGating").shouldDisableMessengerListRanking()?0:9;function g(e){var t=e.threadID;return o("MAWThreadCutover").useGetCutoverSecureThreadKey(t)}function h(t){var a=o("react-compiler-runtime").c(32),i=t.LSresults,l=t.enableMultiSelection,s=t.feedLocation,c=t.feedTracking,d=t.initialSelectedIndex,p=t.onClose,g=t.shareableID,h=t.shouldSkipLightSpeed,v=t.storyData,S=t.threads,R=t.url,L=t.xmaDataPromise,E=h===void 0?!1:h,k=o("CometRelay").useFragment(e!==void 0?e:e=n("UnifiedShareSheetMessengerSuggestedItemsWrapper_thread.graphql"),S),I=r("useUnifiedShareSheetLogger")(),T=I.onMessengerReshareOptionSelected,D=r("useUnifiedShareSheetUtils")(),x=D.convertMWChatSearchResultType2FbSharingReceiverType,$=m(r("UnifiedShareSheetDialogContext")),P=$.setShouldHideMessengerSection,N;e:{var M,w;if(a[0]!==k.attachments||a[1]!==((M=k.attachments_pageable)==null?void 0:M.edges)){var A,F;w=k.attachments?k.attachments:(A=k.attachments_pageable)==null?void 0:A.edges.map(C),a[0]=k.attachments,a[1]=(F=k.attachments_pageable)==null?void 0:F.edges,a[2]=w}else w=a[2];var O=w;if(!O){N=void 0;break e}var B;a[3]!==O?(B=O.filter(y).slice(0,f),a[3]=O,a[4]=B):B=a[4],N=B}var W=N,q=W!=null?W==null?void 0:W.length:0;i.length+q===0&&P(!0);var U;a[5]!==i||a[6]!==x||a[7]!==s||a[8]!==c||a[9]!==T?(U=function(t){var e="unknown";if(i!=null&&t<i.length){var n,r=(n=i[t])==null?void 0:n.resultType;e=x({chat_search_result_type:r}).receiver_type}T({entry_point:s,feed_tracking:c,receiver_absolute_index:t.toString(),receiver_types:[e],sharing_action_audience:"private",sharing_action_destination:"facebook_messaging",sharing_component_name:"hscroll_multiselect_suggested_recipient",sharing_component_variant:"unified_share_sheet"})},a[5]=i,a[6]=x,a[7]=s,a[8]=c,a[9]=T,a[10]=U):U=a[10];var V=U,H;if(a[11]!==i||a[12]!==W||a[13]!==l||a[14]!==s||a[15]!==c||a[16]!==d||a[17]!==p||a[18]!==V||a[19]!==g||a[20]!==E||a[21]!==v||a[22]!==R||a[23]!==L){var G=new Set;H=[],_&&i.map(function(e){var t=H.length;if(e.imageUrl==null||e.displayName==null||e.imageUrl===""||e.displayName===""){r("FBLogger")("unified_share_sheet").warn("LS result has empty imageUrl or displayName");return}l===!0&&E||(G.add(e.id),l===!0?H.push(u.jsx(o("FDSHScroll.react").Child,{children:u.jsx(r("UnifiedShareSheetMessengerReshareLightSpeedMultiSelectionTargetItem.react"),{defaultSelected:t===d,onClose:p,onPressLogger:function(){return V(t)},thread:e})},"ls-"+e.id+"}")):H.push(u.jsx(o("FDSHScroll.react").Child,{children:u.jsx(r("UnifiedShareSheetMessengerReshareLightSpeedTargetItem.react"),{LSresults:i,feedLocation:s,feedTracking:c,index:t,onClose:p,onPressLogger:function(){return V(t)},shareableID:g,shareableUrl:R,storyData:v,thread:e,xmaDataPromise:L})},"ls-"+e.id+"}")))}),W&&W.forEach(function(e){var t;H.push(u.jsx(b,{LSresults:i,enableMultiSelection:l,feedLocation:s,feedTracking:c,idx:H.length,initialSelectedIndex:d,isOnline:(e==null?void 0:e.availability)==="ACTIVE",name:e==null?void 0:e.name,onClose:p,onMultiReceipientPressLogger:V,profilePictureURI:e==null||(t=e.profile_picture)==null?void 0:t.uri,shareableID:g,storyData:v,suggestedContactsIDs:G,threadID:e==null?void 0:e.id,url:R,xmaDataPromise:L},e==null?void 0:e.id))});var z;a[25]!==s||a[26]!==c||a[27]!==p||a[28]!==g||a[29]!==v||a[30]!==R?(z=u.jsx(o("FDSHScroll.react").Child,{children:u.jsx(r("UnifiedShareSheetMessengerSeeMoreButton.react"),{feedLocation:s,feedTracking:c,onClose:p,shareableID:g,storyData:v,url:R})},"messenger_hscroll_see_more"),a[25]=s,a[26]=c,a[27]=p,a[28]=g,a[29]=v,a[30]=R,a[31]=z):z=a[31],H.push(z),a[11]=i,a[12]=W,a[13]=l,a[14]=s,a[15]=c,a[16]=d,a[17]=p,a[18]=V,a[19]=g,a[20]=E,a[21]=v,a[22]=R,a[23]=L,a[24]=H}else H=a[24];return H}function y(e){return(e==null?void 0:e.is_wa_addressable)===!1&&((e==null?void 0:e.is_secure_thread)===!0||(e==null?void 0:e.is_od_cutover_eligible)===!0)?!1:(e==null?void 0:e.is_message_blocked_by_viewer)!==!0&&(e==null?void 0:e.is_restricted_by_viewer)!==!0}function C(e){return e.node}function b(e){var t=o("react-compiler-runtime").c(22),n=e.LSresults,a=e.enableMultiSelection,i=e.feedLocation,l=e.feedTracking,s=e.idx,c=e.initialSelectedIndex,d=e.isOnline,m=e.name,p=e.onClose,_=e.onMultiReceipientPressLogger,f=e.profilePictureURI,h=e.shareableID,y=e.storyData,C=e.suggestedContactsIDs,b=e.threadID,v=e.url,S=e.xmaDataPromise,R;t[0]!==b?(R={threadID:b},t[0]=b,t[1]=R):R=t[1];var L=g(R);if(C.has(b)||C.has(L))return null;var E;t[2]!==n||t[3]!==a||t[4]!==i||t[5]!==l||t[6]!==s||t[7]!==c||t[8]!==d||t[9]!==m||t[10]!==p||t[11]!==_||t[12]!==f||t[13]!==h||t[14]!==y||t[15]!==b||t[16]!==v||t[17]!==S?(E=a===!0?u.jsx(r("UnifiedShareSheetMessengerSuggestedMultiSelectionItem.react"),{defaultSelected:s===c,index:s,isOnline:d,label:m,onClose:p,onPressLogger:function(){return _(s)},photo:f!=null?f:"",shareableID:h,threadID:b},b):u.jsx(r("UnifiedShareSheetMessengerSuggestedItem.react"),{LSresults:n,feedLocation:i,feedTracking:l,hasLightSpeedResults:n.length>0,index:s,isOnline:d,label:m,onClose:p,onPressLogger:function(){return _(s)},photo:f!=null?f:"",shareableID:h,shareableUrl:v,storyData:y,threadID:b,xmaDataPromise:S},b),t[2]=n,t[3]=a,t[4]=i,t[5]=l,t[6]=s,t[7]=c,t[8]=d,t[9]=m,t[10]=p,t[11]=_,t[12]=f,t[13]=h,t[14]=y,t[15]=b,t[16]=v,t[17]=S,t[18]=E):E=t[18];var k;return t[19]!==E||t[20]!==b?(k=u.jsx(o("FDSHScroll.react").Child,{children:E},b),t[19]=E,t[20]=b,t[21]=k):k=t[21],k}l.default=h}),98);